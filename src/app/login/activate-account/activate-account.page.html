<ion-header class="ion-no-border">
  <ion-toolbar *ngIf="!changingEmail">
    <ion-buttons slot="start">
      <ion-button (click)="close()">
        <ion-icon slot="icon-only" name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ "cuenta-inactiva" | i18n }}</ion-title>
  </ion-toolbar>
  <ion-toolbar *ngIf="changingEmail">
    <ion-buttons slot="start">
      <ion-button (click)="back()">
        <ion-icon name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>{{ "cambiar-correo-electrnico" | i18n }}</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content class="ion-padding">
  <div *ngIf="!changingEmail">
    <h4>
      Te hemos enviado un código de seguridad a {{ user.email }}. Revisa tu
      carpeta de spam/no deseado si no lo encuentras.
    </h4>
    <p>{{ "introduce-cdigo-seguridad-para-activar" | i18n }}</p>
    <form (submit)="submitCode()" [formGroup]="codeForm" autocomplete="off">
      <ion-item class="code">
        <ion-input
          autocomplete="off"
          formControlName="code"
          maxlength="6"
          placeholder="{{ 'codigo-seguridad' | i18n }}"
          type="text"
        ></ion-input>
      </ion-item>
      <ion-button
        color="primary"
        expand="block"
        type="submit"
        shape="round"
        [disabled]="codeForm.invalid"
        >{{ "activar-cuenta" | i18n }}</ion-button
      >
    </form>
    <p color="primary" class="ion-text-center" (click)="sendCode()">
      {{ "no-he-recibido-mi-cdigocdigo" | i18n }}
    </p>
  </div>
  <div *ngIf="changingEmail">
    <h4>{{ "revisa-tu-direccin-correo" | i18n }}</h4>
    <p>{{ "asegrate-introducirla-correctamente" | i18n }}</p>
    <form
      (submit)="changeEmail()"
      [formGroup]="emailForm"
      autocomplete="off"
      *ngIf="changingEmail"
    >
      <ion-item>
        <ion-input
          labelPlacement="floating"
          label="Correo electrónico"
          required
          type="email"
          autocomplete="email"
          formControlName="email"
          debounce="500"
          name="email"
          [value]="user.email"
        >
        </ion-input>
      </ion-item>
      <div
        class="error-message"
        *ngIf="emailForm.get('email').invalid && emailForm.get('email').value"
      >
        <ion-icon name="information-circle-outline"></ion-icon>Introduce una
        dirección de correo electrónico válida.
      </div>
      <ion-button
        color="primary"
        expand="block"
        type="submit"
        [disabled]="emailForm.invalid || emailForm.pristine"
        shape="round"
        >{{ "confirmar-cambio" | i18n }}</ion-button
      >
    </form>
  </div>
</ion-content>
<ion-footer *ngIf="!changingEmail">
  <p color="primary" class="ion-text-center" (click)="changingEmail = true">
    ¿Tu email no es {{user.email}}?
  </p>
</ion-footer>
