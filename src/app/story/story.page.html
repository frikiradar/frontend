<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button text="" defaultHref="/tabs/community"></ion-back-button>
    </ion-buttons>
    <ion-title>Historias</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-list id="all-stories">
    <ion-item button detail="false" lines="none" (click)="newStory()" mode="md">
      <ion-avatar slot="start">
        <img
          [src]="auth.currentUserValue?.thumbnail"
          alt="auth.currentUserValue?.name"
        />
        <ion-badge color="tertiary" mode="md">+</ion-badge>
      </ion-avatar>
      <ion-label>
        <h2>AÃ±adir historia</h2>
      </ion-label>
    </ion-item>
    <ion-item
      button
      detail="false"
      *ngFor="let story of groupedStories"
      lines="none"
      (click)="showStories(story.user.id)"
    >
      <ion-avatar slot="start" [ngClass]="story?.viewed ? '' : 'not-view'">
        <img [src]="story.image" [alt]="story.text" />
      </ion-avatar>
      <ion-label>
        <h2>{{story.user.username}}</h2>
        <p>{{story.text}}</p>
      </ion-label>
      <ion-note slot="end">
        {{ story.time_creation | niceDate }}
      </ion-note>
    </ion-item>
  </ion-list>
</ion-content>
