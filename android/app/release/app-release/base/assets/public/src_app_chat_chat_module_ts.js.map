{"version":3,"file":"src_app_chat_chat_module_ts.js","mappings":"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","sources":["./src/app/chat/chat.module.ts","./src/app/chat/chat.page.ts","./src/app/chat/chat.page.html"],"sourcesContent":["import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule } from \"@angular/forms\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { SharedModule } from \"./../shared/shared.module\";\nimport { ChatPage } from \"./chat.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: ChatPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SharedModule\n  ],\n  declarations: [ChatPage]\n})\nexport class ChatPageModule {}\n","import { Component, EventEmitter, Input, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { ModalController } from \"@ionic/angular\";\n\nimport { User } from \"../models/user\";\nimport { AuthService } from \"./../services/auth.service\";\nimport { RulesPage } from \"../rules/rules.page\";\nimport { ConfigService } from \"../services/config.service\";\nimport { ChatModalComponent } from \"./chat-modal/chat-modal.component\";\nimport { ChatService } from \"../services/chat.service\";\nimport { Subscription } from \"rxjs\";\n\n@Component({\n  selector: \"app-chat\",\n  templateUrl: \"./chat.page.html\",\n  styleUrls: [\"./chat.page.scss\"],\n})\nexport class ChatPage implements OnInit {\n  @Input() userChangeEvent: EventEmitter<User[\"id\"]> = new EventEmitter();\n  public desktop = window.innerWidth > 991;\n  public userId: User[\"id\"];\n  private routeSub: Subscription;\n\n  constructor(\n    private route: ActivatedRoute,\n    public auth: AuthService,\n    private modalController: ModalController,\n    private config: ConfigService,\n    private chatSvc: ChatService\n  ) {}\n\n  async ngOnInit() {\n    window.onresize = async () => {\n      this.desktop = window.innerWidth > 991;\n    };\n\n    this.routeSub = this.route.paramMap.subscribe((params) => {\n      const id = +params.get(\"id\");\n      if (id) {\n        history.pushState(null, null, \"/tabs/chat\");\n        this.showChat(id);\n      }\n    });\n\n    const rules = await this.config.get(\"rules\");\n    if (!rules) {\n      const modal = await this.modalController.create({\n        component: RulesPage,\n        cssClass: \"vertical-modal\",\n        backdropDismiss: false,\n      });\n      return await modal.present();\n    }\n  }\n\n  async showChat(id: User[\"id\"]) {\n    this.chatSvc.selectUser(id);\n    if (this.desktop) {\n      this.userId = id;\n    } else {\n      const modal = await this.modalController.create({\n        component: ChatModalComponent,\n        componentProps: { userId: id },\n        cssClass: \"vertical-modal\",\n      });\n\n      await modal.present();\n\n      await modal.onDidDismiss().then((data) => {\n        this.backToList();\n      });\n    }\n  }\n\n  backToList() {\n    this.userId = null;\n    this.chatSvc.selectUser(null);\n    if (this.routeSub) {\n      this.routeSub.unsubscribe();\n    }\n  }\n}\n","<app-chat-list (userChangeEvent)=\"showChat($event)\"></app-chat-list>\n<app-chat-modal\n  [userId]=\"userId\"\n  *ngIf=\"userId\"\n  (backToList)=\"backToList()\"\n></app-chat-modal>\n<div class=\"full-center ion-padding\" *ngIf=\"!userId && desktop\">\n  <ion-icon name=\"chatbubbles\"></ion-icon>\n  <h2>{{ \"no-hay-mensajes\" | i18n }}</h2>\n  <p>{{ \"selecciona-un-chat\" | i18n }}</p>\n</div>\n"],"names":["CommonModule","FormsModule","RouterModule","IonicModule","SharedModule","ChatPage","routes","path","component","ChatPageModule","forChild","declarations","imports","i1","EventEmitter","ActivatedRoute","ModalController","AuthService","RulesPage","ConfigService","ChatModalComponent","ChatService","i0","ɵɵelementStart","ɵɵlistener","ChatPage_app_chat_modal_1_Template_app_chat_modal_backToList_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","backToList","ɵɵelementEnd","ɵɵproperty","userId","ɵɵelement","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","constructor","route","auth","modalController","config","chatSvc","userChangeEvent","desktop","window","innerWidth","ngOnInit","_this","_asyncToGenerator","onresize","routeSub","paramMap","subscribe","params","id","get","history","pushState","showChat","rules","modal","create","cssClass","backdropDismiss","present","_this2","selectUser","componentProps","onDidDismiss","then","data","unsubscribe","ɵɵdirectiveInject","i2","i3","i4","i5","selectors","inputs","decls","vars","consts","template","ChatPage_Template","rf","ctx","ChatPage_Template_app_chat_list_userChangeEvent_0_listener","$event","ɵɵtemplate","ChatPage_app_chat_modal_1_Template","ChatPage_div_2_Template"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}