{"version":3,"file":"src_app_story_story_module_ts.js","mappings":"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","sources":["./src/app/story/story-routing.module.ts","./src/app/story/story.module.ts","./src/app/story/story.page.ts","./src/app/story/story.page.html"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { StoryPage } from './story.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StoryPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { StoryPageRoutingModule } from \"./story-routing.module\";\n\nimport { StoryPage } from \"./story.page\";\nimport { SharedModule } from \"../shared/shared.module\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    StoryPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [StoryPage]\n})\nexport class StoryPageModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { ModalController } from \"@ionic/angular\";\n\nimport { Story } from \"../models/story\";\nimport { User } from \"../models/user\";\nimport { AuthService } from \"../services/auth.service\";\nimport { Config, ConfigService } from \"../services/config.service\";\nimport { NavService } from \"../services/navigation.service\";\nimport { StoryService } from \"../services/story.service\";\nimport { StoryModal } from \"./story-modal/story.modal\";\nimport { ViewStoriesModal } from \"./view-stories/view-stories.modal\";\n\n@Component({\n  selector: \"app-story\",\n  templateUrl: \"./story.page.html\",\n  styleUrls: [\"./story.page.scss\"],\n})\nexport class StoryPage implements OnInit {\n  public stories: Story[];\n  public groupedStories: Story[];\n  public loading = true;\n\n  constructor(\n    private storySvc: StoryService,\n    private modalController: ModalController,\n    public auth: AuthService,\n    private nav: NavService,\n    private config: ConfigService\n  ) {}\n\n  async ngAfterViewInit() {\n    this.groupedStories = (await this.config.get(\n      \"stories\"\n    )) as Config[\"stories\"];\n  }\n\n  async ngOnInit() {\n    this.getStories();\n  }\n\n  async getStories() {\n    const stories = await this.storySvc.getStories();\n    this.stories = this.storySvc.orderStories(stories);\n    this.groupedStories = this.storySvc.groupStories(this.stories);\n    this.config.set(\"stories\", this.groupedStories);\n\n    this.loading = false;\n  }\n\n  async showStories(id: User[\"id\"]) {\n    let stories = this.stories.reverse().filter((s) => s.user.id === id);\n    stories = [\n      ...stories,\n      ...this.stories.reverse().filter((s) => s.user.id !== id),\n    ];\n\n    const modal = await this.modalController.create({\n      component: ViewStoriesModal,\n      componentProps: { stories },\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"vertical-modal\",\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    this.getStories();\n  }\n\n  async newStory() {\n    const modal = await this.modalController.create({\n      component: StoryModal,\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"vertical-modal\",\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    await this.getStories();\n  }\n\n  back() {\n    this.nav.back();\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar>\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"back()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>{{ \"historias-frikis\" | i18n }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n\n<ion-content>\n  <ion-progress-bar type=\"indeterminate\" *ngIf=\"loading\"></ion-progress-bar>\n\n  <ion-list id=\"all-stories\">\n    <ion-item button detail=\"false\" lines=\"none\" (click)=\"newStory()\" mode=\"md\">\n      <ion-avatar slot=\"start\">\n        <img\n          [src]=\"auth.currentUserValue?.thumbnail\"\n          alt=\"auth.currentUserValue?.name\"\n        />\n      </ion-avatar>\n      <ion-badge slot=\"start\" color=\"primary\"\n        ><ion-icon name=\"add\"></ion-icon\n      ></ion-badge>\n      <ion-label>\n        <h2>{{ \"your-story\" | i18n }}</h2>\n      </ion-label>\n    </ion-item>\n    <ion-item\n      button\n      detail=\"false\"\n      *ngFor=\"let story of groupedStories\"\n      lines=\"none\"\n      (click)=\"showStories(story.user.id)\"\n    >\n      <ion-avatar slot=\"start\" [ngClass]=\"story?.viewed ? '' : 'not-view'\">\n        <img *ngIf=\"story.image\" [src]=\"story.image\" [alt]=\"story.text\" />\n        <img\n          *ngIf=\"!story.image\"\n          [src]=\"story.user.thumbnail\"\n          [alt]=\"story.user.username\"\n        />\n      </ion-avatar>\n      <ion-label>\n        <h2>{{story.user.username}}</h2>\n        <p>{{story.text}}</p>\n      </ion-label>\n      <ion-note slot=\"end\"> {{ story.time_creation | niceDate }} </ion-note>\n    </ion-item>\n  </ion-list>\n</ion-content>\n"],"names":["RouterModule","StoryPage","routes","path","component","StoryPageRoutingModule","forChild","imports","i1","exports","CommonModule","FormsModule","IonicModule","SharedModule","StoryPageModule","declarations","ModalController","AuthService","ConfigService","NavService","StoryService","StoryModal","ViewStoriesModal","i0","ɵɵelement","ɵɵproperty","story_r2","image","ɵɵsanitizeUrl","text","user","thumbnail","username","ɵɵelementStart","ɵɵlistener","StoryPage_ion_item_20_Template_ion_item_click_0_listener","ɵɵrestoreView","_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","showStories","id","ɵɵtemplate","StoryPage_ion_item_20_img_2_Template","StoryPage_ion_item_20_img_3_Template","ɵɵelementEnd","ɵɵtext","ɵɵadvance","viewed","ɵɵtextInterpolate","ɵɵtextInterpolate1","ɵɵpipeBind1","time_creation","constructor","storySvc","modalController","auth","nav","config","loading","ngAfterViewInit","_this","_asyncToGenerator","groupedStories","get","ngOnInit","_this2","getStories","_this3","stories","orderStories","groupStories","set","_this4","reverse","filter","s","modal","create","componentProps","keyboardClose","showBackdrop","cssClass","present","onDidDismiss","newStory","_this5","back","ɵɵdirectiveInject","i2","i3","i4","i5","selectors","decls","vars","consts","template","StoryPage_Template","rf","ctx","StoryPage_Template_ion_button_click_3_listener","StoryPage_ion_progress_bar_9_Template","StoryPage_Template_ion_item_click_11_listener","StoryPage_ion_item_20_Template","currentUserValue"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}