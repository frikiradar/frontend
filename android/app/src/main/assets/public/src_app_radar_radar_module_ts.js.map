{"version":3,"file":"src_app_radar_radar_module_ts.js","mappings":"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","sources":["./src/app/radar/radar.module.ts","./src/app/radar/radar.page.ts","./src/app/services/geolocation.service.ts"],"sourcesContent":["import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { SharedModule } from \"./../shared/shared.module\";\nimport { RadarPage } from \"./radar.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: RadarPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    ReactiveFormsModule,\n    SharedModule\n  ],\n  declarations: [RadarPage]\n})\nexport class RadarPageModule {}\n","import {\n  Component,\n  ViewChild,\n  HostListener,\n  ChangeDetectorRef\n} from \"@angular/core\";\nimport { NavigationStart, Router, Event } from \"@angular/router\";\nimport {\n  IonSlides,\n  MenuController,\n  Platform,\n  AlertController,\n  IonRange,\n  IonContent,\n  ToastController,\n  ModalController\n} from \"@ionic/angular\";\nimport { ScrollDetail } from \"@ionic/core\";\nimport { FirebaseX } from \"@ionic-native/firebase-x/ngx\";\nimport { takeWhile } from \"rxjs/operators\";\nimport { CupertinoPane, CupertinoSettings } from \"cupertino-pane\";\nimport * as deepEqual from \"deep-equal\";\n\nimport { User } from \"../models/user\";\nimport { GeolocationService } from \"../services/geolocation.service\";\nimport { UserService } from \"../services/user.service\";\nimport { AuthService } from \"./../services/auth.service\";\nimport { DeviceService } from \"../services/device.service\";\nimport { UtilsService } from \"../services/utils.service\";\nimport { Config, ConfigService } from \"../services/config.service\";\nimport { PushService } from \"../services/push.service\";\nimport {\n  NotificationService,\n  NotificationCounters\n} from \"../services/notification.service\";\nimport { StoryService } from \"../services/story.service\";\nimport { Story } from \"../models/story\";\nimport { StoryModal } from \"../story/story-modal/story.modal\";\nimport { ViewStoriesModal } from \"../story/view-stories/view-stories.modal\";\n\n@Component({\n  selector: \"app-radar\",\n  templateUrl: \"./radar.page.html\",\n  styleUrls: [\"./radar.page.scss\"]\n})\nexport class RadarPage {\n  @ViewChild(\"slides\", { static: false })\n  slides: IonSlides;\n  @ViewChild(\"range\", { static: false })\n  range: IonRange;\n  @ViewChild(\"radarlist\", { static: true })\n  radarlist: IonContent;\n\n  public counters: NotificationCounters;\n\n  public slideOpts = {\n    slidesPerView: 1,\n    breakpoints: {\n      1024: {\n        slidesPerView: 3,\n        centeredSlides: true\n      }\n    },\n    grabCursor: true,\n    lazy: true,\n    coverflowEffect: {\n      rotate: 50,\n      stretch: 0,\n      depth: 100,\n      modifier: 1,\n      slideShadows: false\n    },\n    on: {\n      beforeInit() {\n        const swiper = this;\n\n        swiper.classNames.push(\n          `${swiper.params.containerModifierClass}coverflow`\n        );\n        swiper.classNames.push(`${swiper.params.containerModifierClass}3d`);\n\n        swiper.params.watchSlidesProgress = true;\n        swiper.originalParams.watchSlidesProgress = true;\n      },\n      setTranslate() {\n        const swiper = this;\n        const {\n          width: swiperWidth,\n          height: swiperHeight,\n          slides,\n          $wrapperEl,\n          slidesSizesGrid,\n          $\n        } = swiper;\n        const params = swiper.params.coverflowEffect;\n        const isHorizontal = swiper.isHorizontal();\n        const transform$$1 = swiper.translate;\n        const center = isHorizontal\n          ? -transform$$1 + swiperWidth / 2\n          : -transform$$1 + swiperHeight / 2;\n        const rotate = isHorizontal ? params.rotate : -params.rotate;\n        const translate = params.depth;\n        // Each slide offset from center\n        for (let i = 0, length = slides.length; i < length; i += 1) {\n          const $slideEl = slides.eq(i);\n          const slideSize = slidesSizesGrid[i];\n          const slideOffset = $slideEl[0].swiperSlideOffset;\n          const offsetMultiplier =\n            ((center - slideOffset - slideSize / 2) / slideSize) *\n            params.modifier;\n\n          let rotateY = isHorizontal ? rotate * offsetMultiplier : 0;\n          let rotateX = isHorizontal ? 0 : rotate * offsetMultiplier;\n          // var rotateZ = 0\n          let translateZ = -translate * Math.abs(offsetMultiplier);\n\n          let translateY = isHorizontal ? 0 : params.stretch * offsetMultiplier;\n          let translateX = isHorizontal ? params.stretch * offsetMultiplier : 0;\n\n          // Fix for ultra small values\n          if (Math.abs(translateX) < 0.001) translateX = 0;\n          if (Math.abs(translateY) < 0.001) translateY = 0;\n          if (Math.abs(translateZ) < 0.001) translateZ = 0;\n          if (Math.abs(rotateY) < 0.001) rotateY = 0;\n          if (Math.abs(rotateX) < 0.001) rotateX = 0;\n\n          const slideTransform = `translate3d(${translateX}px,${translateY}px,${translateZ}px)  rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;\n\n          $slideEl.transform(slideTransform);\n          $slideEl[0].style.zIndex =\n            -Math.abs(Math.round(offsetMultiplier)) + 1;\n          if (params.slideShadows) {\n            // Set shadows\n            let $shadowBeforeEl = isHorizontal\n              ? $slideEl.find(\".swiper-slide-shadow-left\")\n              : $slideEl.find(\".swiper-slide-shadow-top\");\n            let $shadowAfterEl = isHorizontal\n              ? $slideEl.find(\".swiper-slide-shadow-right\")\n              : $slideEl.find(\".swiper-slide-shadow-bottom\");\n            if ($shadowBeforeEl.length === 0) {\n              $shadowBeforeEl = swiper.$(\n                `<div class=\"swiper-slide-shadow-${\n                  isHorizontal ? \"left\" : \"top\"\n                }\"></div>`\n              );\n              $slideEl.append($shadowBeforeEl);\n            }\n            if ($shadowAfterEl.length === 0) {\n              $shadowAfterEl = swiper.$(\n                `<div class=\"swiper-slide-shadow-${\n                  isHorizontal ? \"right\" : \"bottom\"\n                }\"></div>`\n              );\n              $slideEl.append($shadowAfterEl);\n            }\n            if ($shadowBeforeEl.length)\n              $shadowBeforeEl[0].style.opacity =\n                offsetMultiplier > 0 ? offsetMultiplier : 0;\n            if ($shadowAfterEl.length)\n              $shadowAfterEl[0].style.opacity =\n                -offsetMultiplier > 0 ? -offsetMultiplier : 0;\n          }\n        }\n\n        // Set correct perspective for IE10\n        if (\n          swiper.support.pointerEvents ||\n          swiper.support.prefixedPointerEvents\n        ) {\n          const ws = $wrapperEl[0].style;\n          ws.perspectiveOrigin = `${center}px 50%`;\n        }\n      },\n      setTransition(duration) {\n        const swiper = this;\n        swiper.slides\n          .transition(duration)\n          .find(\n            \".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left\"\n          )\n          .transition(duration);\n      }\n    }\n  };\n\n  public storiesOpts = {\n    preloadImages: false,\n    lazy: true,\n    slidesPerView: 4.5,\n    breakpoints: {\n      1024: {\n        slidesPerView: 14.5\n      }\n    },\n    grabCursor: true\n  };\n  public stories: Story[];\n  public groupedStories: Story[] = [];\n\n  public hide = false;\n  page = 0;\n  public ratio = -1;\n  public automatic = true;\n  public rangeValue = 1;\n  authUser: User;\n  users: User[] = undefined;\n  public user: User;\n  public view: \"cards\" | \"list\";\n  coordinates: User[\"coordinates\"];\n  public showBackdrop = false;\n  public loading = true;\n  public pane: CupertinoPane;\n  public extended = true;\n  public searchOptions = {\n    identity: true,\n    range: false,\n    connection: false\n  };\n  private searchOptionsChanged = false;\n\n  private paneSettings: CupertinoSettings = {\n    backdrop: true,\n    bottomClose: true,\n    buttonDestroy: false,\n    handleKeyboard: false,\n    breaks: {\n      middle: { enabled: true, height: 500, bounce: true },\n      bottom: { enabled: true, height: 300, bounce: true }\n    },\n    initialBreak: \"middle\",\n\n    onBackdropTap: () => {\n      this.pane.destroy({ animate: true });\n      if (this.searchOptionsChanged) {\n        this.searchOptionsChanged = false;\n        this.loading = true;\n        this.page = 0;\n        this.users = undefined;\n        this.radarlist?.scrollToTop(0);\n        this.getRadarUsers();\n      }\n    }\n  };\n\n  @HostListener(\"document:keydown\", [\"$event\"])\n  handleKeyboardEvent(event: KeyboardEvent) {\n    if (this.users?.length && this.router.url === \"/tabs/radar\") {\n      switch (event.key) {\n        case \"ArrowRight\":\n          this.slides.slideNext();\n          break;\n        case \"ArrowLeft\":\n          this.slides.slidePrev();\n          break;\n        case \"Enter\":\n          this.showProfile(this.user.id);\n          break;\n      }\n    }\n  }\n\n  constructor(\n    public userSvc: UserService,\n    public menu: MenuController,\n    public auth: AuthService,\n    public router: Router,\n    private geolocationSvc: GeolocationService,\n    private deviceSvc: DeviceService,\n    private platform: Platform,\n    private alert: AlertController,\n    private utils: UtilsService,\n    private toast: ToastController,\n    private config: ConfigService,\n    private firebase: FirebaseX,\n    private push: PushService,\n    private notificationSvc: NotificationService,\n    public detectorRef: ChangeDetectorRef,\n    private storySvc: StoryService,\n    private modal: ModalController\n  ) {\n    this.notificationSvc.notification.subscribe(notification => {\n      this.counters = notification;\n    });\n\n    this.router.events.subscribe(async (event: Event) => {\n      if (event instanceof NavigationStart) {\n        if (event.url === \"/tabs/radar\") {\n          this.getStories();\n        }\n      }\n    });\n  }\n\n  async ngAfterViewInit() {\n    this.users = (await this.config.get(\"radar\")) as Config[\"radar\"];\n  }\n\n  async ngOnInit() {\n    this.authUser = this.auth.currentUserValue;\n\n    // Una vez logueado iniciamos notificaciones si no están\n    const device = await this.deviceSvc.getCurrentDevice();\n    if (!device?.token) {\n      this.push.init();\n    }\n    // Y despues iniciamos la geolocalización\n    if (!this.authUser.roles?.includes(\"ROLE_DEMO\")) {\n      try {\n        this.showBackdrop = true;\n        this.coordinates = await this.geolocationSvc.getGeolocation();\n        this.showBackdrop = false;\n        const oldCoordinates = this.authUser.coordinates;\n        if (\n          oldCoordinates === undefined ||\n          oldCoordinates.latitude === undefined ||\n          this.coordinates.latitude.toFixed(3) !==\n            oldCoordinates?.latitude.toFixed(3) ||\n          this.coordinates.longitude.toFixed(3) !==\n            oldCoordinates?.longitude.toFixed(3)\n        ) {\n          const coordinates = await this.userSvc.setCoordinates(\n            this.coordinates.longitude,\n            this.coordinates.latitude\n          );\n          this.authUser.coordinates = coordinates;\n          this.auth.setAuthUser(this.authUser);\n        }\n      } catch (e) {\n        console.error(e);\n        // tienes que aprobar permisos\n      }\n\n      this.authUser = this.auth.currentUserValue;\n    }\n\n    if (this.platform.is(\"cordova\")) {\n      this.firebase\n        .setUserId(\"\" + this.authUser.id)\n        .then(() => console.log(\"User id successfully set\"))\n        .catch(err => console.log(\"Error setting user id:\", err));\n\n      this.firebase\n        .setUserProperty(\"username\", this.authUser.username)\n        .then(() => console.log(\"Username successfully set\"))\n        .catch(err => console.log(\"Error setting username:\", err));\n\n      this.firebase\n        .setScreenName(\"radar\")\n        .then(() => console.log(\"View successfully tracked\"))\n        .catch(err => console.log(\"Error tracking view:\", err));\n    }\n\n    const radar_config = (await this.config.get(\n      \"radar_config\"\n    )) as Config[\"radar_config\"];\n    if (radar_config?.extended !== undefined) {\n      this.extended = radar_config.extended;\n    }\n    if (radar_config?.options !== undefined) {\n      this.searchOptions = radar_config.options;\n    }\n    if (radar_config?.view === \"list\") {\n      this.view = \"list\";\n      const range = radar_config?.range;\n      if (range !== undefined) {\n        this.rangeValue = range;\n        this.ratio = this.getRatio(range);\n      } else {\n        this.ratio = 50;\n      }\n    } else {\n      this.view = \"cards\";\n      this.ratio = -1;\n      await this.utils.delay(500);\n      await this.slides?.slideTo(0);\n    }\n    this.getRadarUsers();\n    this.getStories();\n  }\n\n  async ionViewWillEnter() {\n    if (!this.users?.length) {\n      if (this.authUser && this.authUser.id) {\n        this.auth.currentUser\n          .pipe(takeWhile(u => !!u?.id))\n          .subscribe(async authUser => {\n            if (this.users?.length) {\n              this.authUser = authUser;\n              this.page = 0;\n\n              const radar_config = (await this.config.get(\n                \"radar_config\"\n              )) as Config[\"radar_config\"];\n\n              if (radar_config?.view === \"list\") {\n                this.view = \"list\";\n                const range = radar_config?.range;\n                if (range) {\n                  this.range.value = range;\n                } else {\n                  this.ratio = 50;\n                }\n              } else {\n                await this.slides?.slideTo(0);\n              }\n              this.getRadarUsers();\n            }\n          });\n      }\n    }\n  }\n\n  async getRadarUsers(event?: any) {\n    try {\n      this.page++;\n      let resUsers = [];\n      if (!this.extended) {\n        resUsers = await this.userSvc.getRadarUsers(this.page, this.ratio);\n      } else {\n        resUsers = await this.userSvc.getRadarUsers(\n          this.page,\n          this.ratio,\n          this.searchOptions\n        );\n      }\n      this.loading = false;\n      if (this.page === 1) {\n        this.config.set(\"radar\", resUsers);\n      }\n\n      let users = resUsers;\n\n      this.users =\n        this.page === 1 ? (this.users = users) : [...this.users, ...users];\n      if (this.users?.length > 0) {\n        if (this.ratio === -1) {\n          if (resUsers?.length > 0 && !this.users?.length) {\n            this.users = [...this.users, ...resUsers];\n          }\n\n          if (this.users[0]?.id) {\n            this.user = this.users[0];\n            this.userSvc.view(this.user.id);\n          }\n        } else {\n          if (event) {\n            event.target.complete();\n\n            if (users.length < 15) {\n              event.target.disabled = true;\n            }\n          }\n        }\n      } else if (\n        this.range.value > -1 &&\n        this.range.value < 5 &&\n        this.automatic\n      ) {\n        let value = this.range.value as number;\n        value++;\n        this.range.value = value;\n      }\n\n      if (await this.toast.getTop()) {\n        this.toast.dismiss();\n      }\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  async getStories() {\n    let stories = await this.storySvc.getAllStories();\n    stories = this.storySvc.orderStories(stories);\n    if (!deepEqual(this.stories, stories)) {\n      this.stories = stories;\n      const groupedStories = this.storySvc.groupStories(stories);\n      this.groupedStories = groupedStories;\n    }\n  }\n\n  async newStory() {\n    const modal = await this.modal.create({\n      component: StoryModal,\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\"\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    await this.getStories();\n  }\n\n  async showStories(id: User[\"id\"]) {\n    let stories = this.stories.reverse().filter(s => s.user.id === id);\n    stories = [\n      ...stories,\n      ...this.stories.reverse().filter(s => s.user.id !== id)\n    ];\n    await this.showStoriesModal(stories);\n    await this.getStories();\n  }\n\n  async showStory(story: Story) {\n    const stories = [story];\n    await this.showStoriesModal(stories);\n    await this.getStories();\n  }\n\n  async showStoriesModal(stories: Story[]) {\n    const modal = await this.modal.create({\n      component: ViewStoriesModal,\n      componentProps: { stories },\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\"\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n  }\n\n  async showAllStories() {\n    this.router.navigate([\"/story\"]);\n  }\n\n  async showProfile(id: User[\"id\"]) {\n    this.router.navigate([\"/profile\", id]);\n  }\n\n  search() {\n    this.router.navigate([\"/search\"]);\n  }\n\n  notifications() {\n    this.router.navigate([\"/notification\"]);\n  }\n\n  async changeView() {\n    this.page = 0;\n    this.users = undefined;\n    let radar_config = (await this.config.get(\n      \"radar_config\"\n    )) as Config[\"radar_config\"];\n\n    if (this.view === \"cards\") {\n      this.view = \"list\";\n      this.ratio = 50;\n      if (radar_config) {\n        radar_config.view = this.view;\n        radar_config.range = this.rangeValue;\n      } else {\n        radar_config = { view: this.view, range: this.rangeValue };\n      }\n    } else {\n      this.view = \"cards\";\n      this.ratio = -1;\n\n      radar_config.view = this.view;\n      radar_config.range = -1;\n    }\n    this.config.set(\"radar_config\", radar_config);\n\n    this.getRadarUsers();\n  }\n\n  async changeRatio(value: number) {\n    if (value !== this.range.value) {\n      this.range.value = value;\n    } else {\n      if (this.users?.length < 15) {\n        this.radarAdv();\n      }\n      this.loading = true;\n      this.ratio = this.getRatio(value);\n\n      let radar_config = (await this.config.get(\n        \"radar_config\"\n      )) as Config[\"radar_config\"];\n      radar_config.view = this.view;\n      radar_config.range = value;\n      this.config.set(\"radar_config\", radar_config);\n\n      (\n        await this.toast.create({\n          message:\n            this.ratio < 25000\n              ? \"Buscando personas a \" + this.ratio + \"km\"\n              : \"Buscando personas mundialmente\",\n          position: \"middle\",\n          color: \"secondary\"\n        })\n      ).present();\n\n      this.page = 0;\n      this.users = undefined;\n      this.radarlist?.scrollToTop(0);\n      this.getRadarUsers();\n    }\n  }\n\n  async hideProfile(id: User[\"id\"]) {\n    const nextIndex = this.users.findIndex(u => u.id === id) + 1;\n    this.user = this.users[nextIndex];\n    const users = this.users;\n    this.users = this.users.filter(u => u.id !== id);\n\n    const toast = await this.toast.create({\n      message: \"Has ocultado el usuario\",\n      duration: 3000,\n      position: \"bottom\",\n      buttons: [\n        {\n          text: \"Deshacer\",\n          handler: () => {\n            this.users = users;\n          }\n        }\n      ]\n    });\n    toast.present();\n\n    const log = await toast.onDidDismiss();\n    if (log.role === \"timeout\") {\n      this.userSvc.hide(id);\n    }\n  }\n\n  async onScroll($event: CustomEvent<ScrollDetail>) {\n    if ($event && $event.detail && $event.detail.deltaY) {\n      this.hide =\n        !($event.detail.deltaY < 0) &&\n        this.users?.length > 10 &&\n        $event.detail.scrollTop > 200;\n    }\n  }\n\n  async slide() {\n    this.slides.getActiveIndex().then(index => {\n      this.user = this.users[index];\n      if (this.user?.id) {\n        this.userSvc.view(this.user?.id);\n      }\n      if (index >= this.users?.length - 10) {\n        this.getRadarUsers();\n      }\n      if (\n        this.view === \"cards\" &&\n        this.page === 0 &&\n        this.user.distance >= 100\n      ) {\n        this.radarAdv();\n      }\n    });\n  }\n\n  async dragItem(event: any, id: number) {\n    if (event.detail.ratio > 1.8) {\n      this.hideProfile(id);\n    } else if (event.detail.ratio < -1.8) {\n      await event.target.close();\n      this.showProfile(id);\n    }\n  }\n\n  getRatio(value: number) {\n    switch (value) {\n      case 0:\n        return 10;\n      case 1:\n        return 50;\n      case 2:\n        return 100;\n      case 3:\n        return 500;\n      case 4:\n        return 1000;\n      case 5:\n        return 25000;\n    }\n  }\n\n  async radarAdv() {\n    const radarAdv = this.config.get(\"radarAdv\");\n\n    if (!radarAdv) {\n      const alert = await this.alert.create({\n        header: \"¿Pocas personas cerca tuya?\",\n        message:\n          \"No llores, acabamos de lanzar la aplicación y aún no hemos llegado a todas partes. ¡Ayúdanos a crecer y conviértete en embajador de FrikiRadar compartiendo con tus amigas y amigos!\",\n        buttons: [\n          {\n            text: \"¡Compartir!\",\n            handler: () => {\n              this.utils.share();\n            }\n          }\n        ],\n        cssClass: \"round-alert\"\n      });\n      this.config.set(\"radarAdv\", true);\n      await alert.present();\n    }\n  }\n\n  async filter() {\n    this.pane = new CupertinoPane(\".radar-pane\", this.paneSettings);\n    const radar_config = (await this.config.get(\n      \"radar_config\"\n    )) as Config[\"radar_config\"];\n    if (radar_config) {\n      if (radar_config?.options) {\n        this.searchOptions = radar_config.options;\n      }\n      if (radar_config?.extended) {\n        this.extended = radar_config.extended;\n      }\n    }\n\n    if (this.extended) {\n      this.pane.present({ animate: true });\n    } else {\n      this.pane.present({ animate: true });\n      await this.utils.delay(100);\n      this.pane.moveToBreak(\"bottom\");\n    }\n  }\n\n  async radarSearchChange(extended: boolean) {\n    this.searchOptionsChanged = true;\n    this.extended = extended;\n    let radar_config = (await this.config.get(\n      \"radar_config\"\n    )) as Config[\"radar_config\"];\n    if (radar_config) {\n      radar_config.extended = extended;\n    } else {\n      radar_config = { extended };\n    }\n\n    this.config.set(\"radar_config\", radar_config);\n    if (extended) {\n      this.pane.moveToBreak(\"middle\");\n    } else {\n      this.pane.moveToBreak(\"bottom\");\n    }\n  }\n\n  async radarSearchOptions(\n    property: keyof Config[\"radar_config\"][\"options\"],\n    value: boolean\n  ) {\n    this.searchOptionsChanged = true;\n    let radar_config = (await this.config.get(\n      \"radar_config\"\n    )) as Config[\"radar_config\"];\n\n    if (radar_config?.options) {\n      radar_config.options = this.searchOptions;\n    } else {\n      radar_config = { options: this.searchOptions };\n    }\n\n    radar_config.options[property] = value;\n    this.config.set(\"radar_config\", radar_config);\n    this.searchOptions = radar_config.options;\n  }\n}\n","import { Injectable } from \"@angular/core\";\nimport { Geolocation } from \"@ionic-native/geolocation/ngx\";\nimport { LocationAccuracy } from \"@ionic-native/location-accuracy/ngx\";\nimport { ModalController, Platform, ToastController } from \"@ionic/angular\";\n\nimport { RequestGeolocationModal } from \"../radar/request-geolocation-modal/request-geolocation.modal\";\nimport { ConfigService } from \"./config.service\";\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class GeolocationService {\n  notifications: any = [];\n\n  constructor(\n    private modal: ModalController,\n    private geolocation: Geolocation,\n    private config: ConfigService,\n    private locationAccuracy: LocationAccuracy,\n    private platform: Platform,\n    private toastController: ToastController\n  ) {}\n\n  async requestPermission() {\n    const modal = await this.modal.create({\n      component: RequestGeolocationModal,\n      backdropDismiss: false\n    });\n    await modal.present();\n    return await modal.onDidDismiss();\n  }\n\n  async forcePermission() {\n    const modal = await this.modal.create({\n      component: RequestGeolocationModal,\n      componentProps: { view: \"force\" },\n      backdropDismiss: false\n    });\n    await modal.present();\n    return await modal.onDidDismiss();\n  }\n\n  async getGeolocation(): Promise<{ longitude: number; latitude: number }> {\n    const geoconfig = await this.config.get(\"geolocation\");\n    if (geoconfig === true) {\n      return await this.getCoordinates();\n    } else {\n      await this.requestPermission();\n      return await this.getCoordinates();\n    }\n  }\n\n  async getCoordinates() {\n    try {\n      (\n        await this.toastController.create({\n          message: \"Obteniendo tu ubicación\",\n          position: \"middle\",\n          color: \"secondary\"\n        })\n      ).present();\n\n      if (this.platform.is(\"cordova\")) {\n        await this.locationAccuracy.request(\n          this.locationAccuracy.REQUEST_PRIORITY_LOW_POWER\n        );\n      }\n\n      const coordinates = await this.geolocation.getCurrentPosition({\n        timeout: 15000,\n        maximumAge: 15000\n      });\n      const longitude = coordinates.coords.longitude;\n      const latitude = coordinates.coords.latitude;\n      this.config.set(\"geolocation\", true);\n      this.toastController.dismiss();\n      return { longitude, latitude };\n    } catch (e) {\n      // this.config.set(\"geolocation\", false);\n      this.config.set(\"geolocation\", true);\n      this.toastController.dismiss();\n      // await this.forcePermission();\n      // return await this.getCoordinates();\n      return { longitude: 0, latitude: 0 };\n    }\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}