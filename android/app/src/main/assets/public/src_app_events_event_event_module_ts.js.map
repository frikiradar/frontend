{"version":3,"file":"src_app_events_event_event_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEd;AAEzC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,kDAAS;KACrB;CACF,CAAC;IAMW,sBAAsB,SAAtB,sBAAsB;CAAG;AAAzB,sBAAsB;IAJlC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,sBAAsB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChByB;AACnB;AACM;AACF;AAEA;AAEmB;AAEvB;IAY5B,eAAe,SAAf,eAAe;CAAG;AAAlB,eAAe;IAV3B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,yEAAsB;YACtB,+DAAY;SACb;QACD,YAAY,EAAE,CAAC,kDAAS,CAAC;KAC1B,CAAC;GACW,eAAe,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrBsC;AACR;AACE;AACE;AACI;AACD;AACH;AAEZ;AACO;AAED;AAEU;IAQrD,SAAS,SAAT,SAAS;IAiBpB,YACU,KAAqB,EACrB,MAAc,EACd,QAAsB,EACtB,GAAe,EACf,SAAuB,EACvB,KAAmB,EACpB,IAAiB,EAChB,MAAkB,EAClB,KAAsB,EACtB,KAAsB;QATtB,UAAK,GAAL,KAAK,CAAgB;QACrB,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAc;QACtB,QAAG,GAAH,GAAG,CAAY;QACf,cAAS,GAAT,SAAS,CAAc;QACvB,UAAK,GAAL,KAAK,CAAc;QACpB,SAAI,GAAJ,IAAI,CAAa;QAChB,WAAM,GAAN,MAAM,CAAY;QAClB,UAAK,GAAL,KAAK,CAAiB;QACtB,UAAK,GAAL,KAAK,CAAiB;QAzBzB,WAAM,GAAY,EAAE,CAAC;QACrB,gBAAW,GAAG,KAAK,CAAC;QAG3B,iBAAY,GAAsB;YAChC,QAAQ,EAAE,IAAI;YACd,WAAW,EAAE,IAAI;YACjB,aAAa,EAAE,KAAK;YACpB,cAAc,EAAE,KAAK;YACrB,YAAY,EAAE,QAAQ;YACtB,aAAa,EAAE,GAAG,EAAE;gBAClB,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;YACvC,CAAC;SACF,CAAC;IAaC,CAAC;IAEE,QAAQ;;YACZ,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;YACrD,IAAI,CAAC,QAAQ,CAAC,CAAC,KAAK,CAAC,CAAC;QACxB,CAAC;KAAA;IAEK,QAAQ,CAAC,EAAe;;YAC5B,IAAI,KAAK,GAAG,IAAI,CAAC;YACjB,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;gBAC9B,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;aAC1C;iBAAM;gBACL,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC;aAChD;YACD,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,EAAE;gBACrC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC;aACnB;YACD,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;YACnB,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,EAAE;gBACjC,IAAI,CAAC,MAAM,EAAE,CAAC;aACf;YAED,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,IAAI,CAC7C,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAC5C,CAAC;QACJ,CAAC;KAAA;IAED,MAAM;QACJ,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;YAC/D,MAAM,KAAK,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC;YACzG,MAAM,MAAM,GACV,2FAA2F;gBAC3F,KAAK,CAAC,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC;YAC9B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,8BAA8B,CAAC,MAAM,CAAC,CAAC;SACrE;IACH,CAAC;IAEK,WAAW;;YACf,IAAI;gBACF,IAAI,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACjE,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;aACzB;YAAC,OAAO,CAAC,EAAE;gBACV,CACE,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;oBACtB,OAAO,EAAE,IAAI,CAAC,IAAI,CAAC,gBAAgB;wBACjC,CAAC,CAAC,CAAC;wBACH,CAAC,CAAC,kEAAkE;oBACtE,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,QAAQ;oBAClB,KAAK,EAAE,QAAQ;iBAChB,CAAC,CACH,CAAC,OAAO,EAAE,CAAC;aACb;QACH,CAAC;KAAA;IAEK,aAAa;;YACjB,IAAI;gBACF,IAAI,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,kBAAkB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;gBACnE,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;aAC1B;YAAC,OAAO,CAAC,EAAE;gBACV,CACE,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;oBACtB,OAAO,EAAE,CAAC;oBACV,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,QAAQ;oBAClB,KAAK,EAAE,QAAQ;iBAChB,CAAC,CACH,CAAC,OAAO,EAAE,CAAC;aACb;QACH,CAAC;KAAA;IAEK,QAAQ;;YACZ,IAAI,IAAI,GAAG,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC;YAEpC,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;gBAC9B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;aACvC;iBAAM;gBACL,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,EAAE;oBAChC,WAAW,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;iBAC5C,CAAC,CAAC;aACJ;QACH,CAAC;KAAA;IAEK,QAAQ,CAAC,IAAkB;;YAC/B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;QACxC,CAAC;KAAA;IAED,gBAAgB;QACd,IAAI,CAAC,IAAI,GAAG,IAAI,yDAAa,CAAC,oBAAoB,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC;QACvE,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;IACvC,CAAC;IAEK,WAAW,CAAC,EAAc;;YAC9B,IAAI,EAAE,KAAK,CAAC,EAAE;gBACZ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,CAAC;aACxC;QACH,CAAC;KAAA;IAED,KAAK;QACH,MAAM,GAAG,GAAG,gCAAgC,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,CAAC;QAC5D,IAAI,CAAC,KAAK,CAAC,KAAK,CACd,GAAG,EACH,oDAAoD,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CACxE,CAAC;IACJ,CAAC;IAED,OAAO,CAAC,KAAU;QAChB,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC3B,OAAO,KAAK,CAAC;IACf,CAAC;IAEK,MAAM;;YACV,IAAI,CAAC,KAAK,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAC9D,CAAC;KAAA;IAEK,MAAM;;YACV,IAAI;gBACF,MAAM,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBAC5C,IAAI,CAAC,IAAI,EAAE,CAAC;aACb;YAAC,OAAO,CAAC,EAAE;gBACV,CACE,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;oBACtB,OAAO,EAAE,6BAA6B;oBACtC,QAAQ,EAAE,IAAI;oBACd,QAAQ,EAAE,QAAQ;oBAClB,KAAK,EAAE,QAAQ;iBAChB,CAAC,CACH,CAAC,OAAO,EAAE,CAAC;aACb;QACH,CAAC;KAAA;IAEK,IAAI;;;YACR,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAE,gEAAU;gBACrB,aAAa,EAAE,IAAI;gBACnB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,YAAY;gBACtB,cAAc,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,UAAI,CAAC,KAAK,0CAAE,IAAI,EAAE;aAC9D,CAAC,CAAC;YAEH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAC3B,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;;KAC9B;IAED,IAAI;QACF,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAClB,CAAC;CACF;;YA5LQ,4DAAc;YAAE,oDAAM;YAHtB,iEAAY;YADZ,oEAAU;YADV,oEAAY;YADZ,iEAAY;YADZ,+DAAW;YADX,6DAAU;YADV,4DAAe;YAAE,4DAAe;;AAqB5B,SAAS;IALrB,yDAAS,CAAC;QACT,QAAQ,EAAE,WAAW;QACrB,kEAAgC;;KAEjC,CAAC;4EAmBiB,4DAAc;QACb,oDAAM;QACJ,iEAAY;QACjB,oEAAU;QACJ,oEAAY;QAChB,iEAAY;QACd,+DAAW;QACR,6DAAU;QACX,4DAAe;QACf,4DAAe;GA3BrB,SAAS,CAgLrB;AAhLqB","sources":["./src/app/events/event/event-routing.module.ts","./src/app/events/event/event.module.ts","./src/app/events/event/event.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { EventPage } from './event.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: EventPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class EventPageRoutingModule {}\n","import { SharedModule } from \"./../../shared/shared.module\";\nimport { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { EventPageRoutingModule } from \"./event-routing.module\";\n\nimport { EventPage } from \"./event.page\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EventPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [EventPage]\n})\nexport class EventPageModule {}\n","import { ModalController, ToastController } from \"@ionic/angular\";\nimport { UrlService } from \"./../../services/url.service\";\nimport { AuthService } from \"./../../services/auth.service\";\nimport { UtilsService } from \"./../../services/utils.service\";\nimport { DomSanitizer, SafeUrl } from \"@angular/platform-browser\";\nimport { NavService } from \"./../../services/navigation.service\";\nimport { EventService } from \"./../../services/event.service\";\n\nimport { Component, OnInit } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { Event } from \"src/app/models/event\";\nimport { EventModal } from \"../event-modal/event.modal\";\nimport { Page } from \"src/app/models/page\";\nimport { CupertinoPane, CupertinoSettings } from \"cupertino-pane\";\nimport { User } from \"src/app/models/user\";\n\n@Component({\n  selector: \"app-event\",\n  templateUrl: \"./event.page.html\",\n  styleUrls: [\"./event.page.scss\"]\n})\nexport class EventPage implements OnInit {\n  public event: Event;\n  public mapSrc: SafeUrl = \"\";\n  public participant = false;\n  public pane: CupertinoPane;\n\n  paneSettings: CupertinoSettings = {\n    backdrop: true,\n    bottomClose: true,\n    buttonDestroy: false,\n    handleKeyboard: false,\n    initialBreak: \"middle\",\n    onBackdropTap: () => {\n      this.pane.destroy({ animate: true });\n    }\n  };\n\n  constructor(\n    private route: ActivatedRoute,\n    private router: Router,\n    private eventSvc: EventService,\n    private nav: NavService,\n    private sanitizer: DomSanitizer,\n    private utils: UtilsService,\n    public auth: AuthService,\n    private urlSvc: UrlService,\n    private modal: ModalController,\n    private toast: ToastController\n  ) {}\n\n  async ngOnInit() {\n    const param = this.route.snapshot.paramMap.get(\"id\");\n    this.getEvent(+param);\n  }\n\n  async getEvent(id: Event[\"id\"]) {\n    let event = null;\n    if (this.auth.currentUserValue) {\n      event = await this.eventSvc.getEvent(id);\n    } else {\n      event = await this.eventSvc.getPublicEvent(id);\n    }\n    if (new Date(event.date) < new Date()) {\n      event.past = true;\n    }\n    this.event = event;\n    if (this.event.type === \"offline\") {\n      this.setMap();\n    }\n\n    this.participant = this.event.participants.some(\n      p => p.id === this.auth.currentUserValue.id\n    );\n  }\n\n  setMap() {\n    if (this.event.country && this.event.city && this.event.address) {\n      const query = `${this.event.country} ${this.event.city} ${this.event.address} ${this.event.postal_code}`;\n      const search =\n        \"https://www.google.com/maps/embed/v1/place?key=AIzaSyBdyInAg-2KUZtQFnrQ5ra7wjf2S4q4GTQ&q=\" +\n        query.replace(/\\s|,/g, \"+\");\n      this.mapSrc = this.sanitizer.bypassSecurityTrustResourceUrl(search);\n    }\n  }\n\n  async participate() {\n    try {\n      this.event = await this.eventSvc.participateEvent(this.event.id);\n      this.participant = true;\n    } catch (e) {\n      (\n        await this.toast.create({\n          message: this.auth.currentUserValue\n            ? e\n            : \"Tienes que iniciar sesión o registrarte para apuntarte al evento\",\n          duration: 2000,\n          position: \"bottom\",\n          color: \"danger\"\n        })\n      ).present();\n    }\n  }\n\n  async unparticipate() {\n    try {\n      this.event = await this.eventSvc.unparticipateEvent(this.event.id);\n      this.participant = false;\n    } catch (e) {\n      (\n        await this.toast.create({\n          message: e,\n          duration: 2000,\n          position: \"bottom\",\n          color: \"danger\"\n        })\n      ).present();\n    }\n  }\n\n  async showRoom() {\n    let slug = \"event-\" + this.event.id;\n\n    if (this.auth.currentUserValue) {\n      this.router.navigate([\"/room\", slug]);\n    } else {\n      this.nav.navigateRoot([\"/login\"], {\n        queryParams: { returnUrl: this.router.url }\n      });\n    }\n  }\n\n  async showPage(slug: Page[\"slug\"]) {\n    this.router.navigate([\"/page\", slug]);\n  }\n\n  showParticipants() {\n    this.pane = new CupertinoPane(\".participants-pane\", this.paneSettings);\n    this.pane.present({ animate: true });\n  }\n\n  async showProfile(id: User[\"id\"]) {\n    if (id !== 1) {\n      this.router.navigate([\"/profile\", id]);\n    }\n  }\n\n  share() {\n    const url = `https://frikiradar.app/event/${this.event.id}`;\n    this.utils.share(\n      url,\n      \"¡Ey, echa un vistazo a este evento en FrikiRadar! \" + this.event.title\n    );\n  }\n\n  openUrl(event: any) {\n    this.urlSvc.openUrl(event);\n    return false;\n  }\n\n  async cancel() {\n    this.event = await this.eventSvc.cancelEvent(this.event.id);\n  }\n\n  async remove() {\n    try {\n      await this.eventSvc.deleteEvent(this.event);\n      this.back();\n    } catch (e) {\n      (\n        await this.toast.create({\n          message: \"Error al eliminar el evento\",\n          duration: 2000,\n          position: \"bottom\",\n          color: \"danger\"\n        })\n      ).present();\n    }\n  }\n\n  async edit() {\n    const modal = await this.modal.create({\n      component: EventModal,\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\",\n      componentProps: { event: this.event, user: this.event?.user }\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    this.getEvent(this.event.id);\n  }\n\n  back() {\n    this.nav.back();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}