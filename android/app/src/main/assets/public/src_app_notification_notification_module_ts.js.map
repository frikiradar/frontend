{"version":3,"file":"src_app_notification_notification_module_ts.js","mappings":"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","sources":["./src/app/notification/notification-routing.module.ts","./src/app/notification/notification.module.ts","./src/app/notification/notification.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { NotificationPage } from './notification.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: NotificationPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class NotificationPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { NotificationPageRoutingModule } from \"./notification-routing.module\";\nimport { NotificationPage } from \"./notification.page\";\nimport { SharedModule } from \"../shared/shared.module\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    NotificationPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [NotificationPage]\n})\nexport class NotificationPageModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { CupertinoPane, CupertinoSettings } from \"cupertino-pane\";\n\nimport { NotificationService } from \"../services/notification.service\";\nimport { Notification } from \"../models/notification\";\nimport { UrlService } from \"../services/url.service\";\nimport { NavService } from \"../services/navigation.service\";\n\n@Component({\n  selector: \"app-notification\",\n  templateUrl: \"./notification.page.html\",\n  styleUrls: [\"./notification.page.scss\"]\n})\nexport class NotificationPage implements OnInit {\n  public notifications: Notification[] = undefined;\n  public pane: CupertinoPane;\n  public notification: Notification;\n\n  private paneSettings: CupertinoSettings = {\n    backdrop: true,\n    bottomClose: true,\n    buttonDestroy: false,\n    handleKeyboard: false,\n    initialBreak: \"middle\",\n    onBackdropTap: () => {\n      this.pane.destroy({ animate: true });\n    }\n  };\n\n  constructor(\n    private notificationSvc: NotificationService,\n    private url: UrlService,\n    private nav: NavService\n  ) {}\n\n  async ngOnInit() {\n    this.notifications = await this.notificationSvc.getNotifications();\n  }\n\n  async showNotification(notification: Notification) {\n    await this.readNotification(notification);\n    this.url.openUrl(notification.url);\n  }\n\n  showOptions(event: Event, notification: Notification) {\n    event.stopPropagation();\n    this.notification = notification;\n    this.pane = new CupertinoPane(\".notifications-pane\", this.paneSettings);\n    this.pane.present({ animate: true });\n  }\n\n  async readNotification(notification: Notification) {\n    try {\n      notification = await this.notificationSvc.readNotification(\n        notification.id\n      );\n      this.notifications.map(n => {\n        if (n.id === notification.id) {\n          n.time_read = notification.time_read;\n        }\n      });\n      this.pane.destroy({ animate: true });\n      await this.notificationSvc.getUnread();\n    } catch (e) {\n      console.error(`Error al marcar como leída`);\n    }\n  }\n\n  async unreadNotification(notification: Notification) {\n    try {\n      notification = await this.notificationSvc.unreadNotification(\n        notification.id\n      );\n      this.notifications.map(n => {\n        if (n.id === notification.id) {\n          n.time_read = notification.time_read;\n        }\n      });\n      this.pane.destroy({ animate: true });\n      await this.notificationSvc.getUnread();\n    } catch (e) {\n      console.error(`Error al desmarcar como leída`);\n    }\n  }\n\n  async removeNotifications() {\n    try {\n      await this.notificationSvc.removeNotifications();\n      this.notifications = [];\n      await this.notificationSvc.getUnread();\n    } catch (e) {\n      console.error(`Error al eliminar las notificaciones`);\n    }\n  }\n\n  async removeNotification(notification: Notification) {\n    try {\n      await this.notificationSvc.removeNotification(notification.id);\n      this.notifications = this.notifications.filter(\n        n => n.id !== notification.id\n      );\n      this.pane.destroy({ animate: true });\n      await this.notificationSvc.getUnread();\n    } catch (e) {\n      console.error(`Error al eliminar la notificación`);\n    }\n  }\n\n  back() {\n    this.nav.back();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}