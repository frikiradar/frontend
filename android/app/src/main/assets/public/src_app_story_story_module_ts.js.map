{"version":3,"file":"src_app_story_story_module_ts.js","mappings":"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","sources":["./src/app/story/story-routing.module.ts","./src/app/story/story.module.ts","./src/app/story/story.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { StoryPage } from './story.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StoryPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class StoryPageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\n\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { StoryPageRoutingModule } from \"./story-routing.module\";\n\nimport { StoryPage } from \"./story.page\";\nimport { SharedModule } from \"../shared/shared.module\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    StoryPageRoutingModule,\n    SharedModule\n  ],\n  declarations: [StoryPage]\n})\nexport class StoryPageModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { ModalController } from \"@ionic/angular\";\nimport * as deepEqual from \"deep-equal\";\n\nimport { Story } from \"../models/story\";\nimport { User } from \"../models/user\";\nimport { AuthService } from \"../services/auth.service\";\nimport { Config, ConfigService } from \"../services/config.service\";\nimport { NavService } from \"../services/navigation.service\";\nimport { StoryService } from \"../services/story.service\";\nimport { StoryModal } from \"./story-modal/story.modal\";\nimport { ViewStoriesModal } from \"./view-stories/view-stories.modal\";\n\n@Component({\n  selector: \"app-story\",\n  templateUrl: \"./story.page.html\",\n  styleUrls: [\"./story.page.scss\"]\n})\nexport class StoryPage implements OnInit {\n  public stories: Story[];\n  public groupedStories: Story[];\n  public loading = true;\n\n  constructor(\n    private storySvc: StoryService,\n    private modal: ModalController,\n    public auth: AuthService,\n    private nav: NavService,\n    private config: ConfigService\n  ) {}\n\n  async ngAfterViewInit() {\n    this.groupedStories = (await this.config.get(\n      \"stories\"\n    )) as Config[\"stories\"];\n  }\n\n  async ngOnInit() {\n    this.getStories();\n  }\n\n  async getStories() {\n    const stories = await this.storySvc.getAllStories();\n    this.stories = this.storySvc.orderStories(stories);\n    const groupedStories = this.storySvc.groupStories(this.stories);\n    if (this.groupedStories) {\n      if (!deepEqual(this.groupedStories, groupedStories)) {\n        this.groupedStories = groupedStories;\n        this.config.set(\"stories\", groupedStories);\n      }\n    } else {\n      this.groupedStories = groupedStories;\n      this.config.set(\"stories\", groupedStories);\n    }\n\n    this.loading = false;\n  }\n\n  async showStories(id: User[\"id\"]) {\n    let stories = this.stories.reverse().filter(s => s.user.id === id);\n    stories = [\n      ...stories,\n      ...this.stories.reverse().filter(s => s.user.id !== id)\n    ];\n\n    const modal = await this.modal.create({\n      component: ViewStoriesModal,\n      componentProps: { stories },\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\"\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    this.getStories();\n  }\n\n  async newStory() {\n    const modal = await this.modal.create({\n      component: StoryModal,\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\"\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    await this.getStories();\n  }\n\n  back() {\n    this.nav.back();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}