{"version":3,"file":"src_app_room_room_module_ts.js","mappings":"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","sources":["./src/app/room/room.module.ts","./src/app/room/room.page.ts"],"sourcesContent":["import { CommonModule } from \"@angular/common\";\nimport { NgModule } from \"@angular/core\";\nimport { FormsModule, ReactiveFormsModule } from \"@angular/forms\";\nimport { RouterModule, Routes } from \"@angular/router\";\nimport { IonicModule } from \"@ionic/angular\";\nimport { PickerModule } from \"@ctrl/ngx-emoji-mart\";\n\nimport { SharedModule } from \"../shared/shared.module\";\nimport { RoomPage } from \"./room.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: RoomPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    SharedModule,\n    PickerModule\n  ],\n  declarations: [RoomPage]\n})\nexport class RoomPageModule { }\n","import {\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostListener,\n  OnInit,\n  ViewChild,\n} from \"@angular/core\";\nimport { SafeResourceUrl } from \"@angular/platform-browser\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { Clipboard } from \"@ionic-native/clipboard/ngx\";\nimport { Keyboard } from \"@ionic-native/keyboard/ngx\";\nimport {\n  ActionSheetController,\n  AlertController,\n  IonContent,\n  IonInfiniteScroll,\n  ModalController,\n  Platform,\n  PopoverController,\n  ToastController,\n} from \"@ionic/angular\";\nimport { AndroidPermissions } from \"@ionic-native/android-permissions/ngx\";\nimport { CupertinoPane, CupertinoSettings } from \"cupertino-pane\";\nimport { AngularFireMessaging } from \"@angular/fire/compat/messaging\";\nimport { FirebaseX } from \"@ionic-native/firebase-x/ngx\";\n\nimport { Chat } from \"../models/chat\";\nimport { User } from \"../models/user\";\nimport { ChatService } from \"../services/chat.service\";\nimport { ConfigService } from \"../services/config.service\";\nimport { UrlService } from \"../services/url.service\";\nimport { AuthService } from \"../services/auth.service\";\nimport { UtilsService } from \"../services/utils.service\";\nimport { ViewerModalComponent } from \"ngx-ionic-image-viewer\";\nimport { Room } from \"../models/room\";\nimport { RoomService } from \"../services/room.service\";\nimport { Page } from \"../models/page\";\nimport { NavService } from \"../services/navigation.service\";\nimport { UserService } from \"../services/user.service\";\nimport { RulesPage } from \"../rules/rules.page\";\nimport { Event } from \"../models/event\";\nimport { EventModal } from \"../events/event-modal/event.modal\";\n\n@Component({\n  selector: \"app-room\",\n  templateUrl: \"./room.page.html\",\n  styleUrls: [\"./room.page.scss\"],\n})\nexport class RoomPage implements OnInit {\n  @ViewChild(\"chatlist\", { static: false })\n  chatlist: IonContent;\n  @ViewChild(IonInfiniteScroll, { static: false })\n  infiniteScroll: IonInfiniteScroll;\n  @ViewChild(\"imageInput\", { static: false })\n  imageInput: ElementRef;\n\n  source: EventSource;\n  public toggled: boolean = false;\n  public oldLastMessage: number;\n\n  public room: Room;\n  public roomPage: Page;\n  slug: Room[\"slug\"];\n  messages: Chat[] = [];\n  avatar: SafeResourceUrl;\n  public page = 1;\n  pressOptions = false;\n  selectedMessage: Chat;\n  alertError: any;\n  public image: string;\n  public replying = false;\n  public editing = false;\n  public writing = false;\n  public toUserWriting = \"\";\n  public pane: CupertinoPane;\n  public realtimeChat = true;\n\n  private paneSettings: CupertinoSettings = {\n    backdrop: true,\n    bottomClose: true,\n    buttonDestroy: false,\n    handleKeyboard: false,\n    initialBreak: \"middle\",\n    onBackdropTap: () => {\n      this.pane.destroy({ animate: true });\n      this.selectedMessage = undefined;\n      this.pressOptions = false;\n    },\n  };\n\n  constructor(\n    public auth: AuthService,\n    private router: Router,\n    private route: ActivatedRoute,\n    private nav: NavService,\n    private roomSvc: RoomService,\n    public chatSvc: ChatService,\n    private toast: ToastController,\n    private alert: AlertController,\n    private clipboard: Clipboard,\n    public keyboard: Keyboard,\n    public platform: Platform,\n    private config: ConfigService,\n    private urlSvc: UrlService,\n    private androidPermissions: AndroidPermissions,\n    public sheet: ActionSheetController,\n    public utils: UtilsService,\n    public modalController: ModalController,\n    public popover: PopoverController,\n    public userSvc: UserService,\n    private afMessaging: AngularFireMessaging,\n    private firebase: FirebaseX,\n    private cd: ChangeDetectorRef\n  ) {}\n\n  @HostListener(\"window:focus\")\n  onFocus() {\n    this.getLastMessages();\n  }\n\n  async ngOnInit() {\n    const config: {\n      maintenance: boolean;\n      min_version: string;\n      chat: boolean;\n    } = (await this.config.getConfig()) as any;\n\n    this.alertError = await this.alert.create({\n      header: `Ups, error al conectar`,\n      message:\n        \"Es posible que el servicio de chat esté en mantenimiento en estos momentos.\",\n      backdropDismiss: false,\n      buttons: [\n        {\n          text: \"Intentar reconectar\",\n        },\n        {\n          text: \"Ok, seré paciente\",\n          handler: () => {\n            this.back();\n          },\n        },\n      ],\n      cssClass: \"round-alert\",\n    });\n\n    if (!config.chat && !this.auth.isAdmin()) {\n      this.alertError.present();\n    }\n\n    this.slug = this.route.snapshot.paramMap.get(\"slug\");\n    try {\n      this.room = await this.roomSvc.getRoom(this.slug);\n\n      const rooms_config = await this.roomSvc.getRoomsConfig();\n      if (\n        this.room.last_message >\n        rooms_config.find((r) => r.slug === this.room.slug)?.last_message\n      ) {\n        this.oldLastMessage = rooms_config?.find(\n          (r) => r.slug === this.room.slug\n        )?.last_message;\n      }\n      this.roomPage = this.room.page;\n    } catch (e) {\n      console.error(`No se ha podido cargar la sala. Error: ${e}`);\n    }\n\n    if (\n      this.room &&\n      !this.auth.currentUserValue?.roles?.includes(this.room?.permissions[0])\n    ) {\n      this.auth.logout();\n    }\n\n    const rules = await this.config.get(\"rules\");\n    if (!rules) {\n      const modal = await this.modalController.create({\n        component: RulesPage,\n        cssClass: \"full-modal\",\n        backdropDismiss: false,\n      });\n      return await modal.present();\n    }\n\n    this.getLastMessages();\n\n    if (!this.platform.is(\"cordova\")) {\n      try {\n        await this.afMessaging.requestPermission.toPromise();\n      } catch (e) {\n        this.realtimeChat = false;\n      }\n    }\n  }\n\n  async getLastMessages() {\n    try {\n      let messages = (await this.roomSvc.getMessages(this.slug, 1))\n        .filter((m) => m.text || m.image || m.audio)\n        .reverse();\n\n      if (messages.length && (this.room?.visible || this.roomPage)) {\n        this.room.last_message = messages[messages.length - 1].id;\n        this.roomSvc.setLastMessage(this.room);\n      }\n\n      messages = messages.filter((m) => {\n        if (!this.messages.some((me) => me.id === m.id)) {\n          return m;\n        }\n      });\n\n      messages.map((m) => {\n        if (m.event) {\n          if (\n            m.event.participants.some(\n              (p) => p.id === this.auth.currentUserValue.id\n            )\n          ) {\n            m.event.participate = true;\n          }\n        }\n      });\n      if (this.messages.length) {\n        messages.forEach((message) => {\n          this.messageReceived(message);\n        });\n      } else {\n        this.messages = messages;\n      }\n\n      if (this.messages.length < 15) {\n        this.infiniteScroll.disabled = true;\n      }\n\n      this.scrollDown(1000);\n\n      this.connectSSE();\n\n      window.addEventListener(\"keyboardDidShow\", (event) => {\n        this.scrollDown();\n      });\n\n      window.addEventListener(\"keyboardDidHide\", (event) => {\n        this.scrollDown();\n      });\n\n      this.platform.backButton.subscribe(() => {\n        this.source?.close();\n      });\n    } catch (e) {\n      console.error(e);\n      await this.alertError.present();\n    }\n  }\n\n  async sendMessage(message?: Chat) {\n    const text = message.text;\n    const image = message.image;\n    const mentions = message.mentions;\n\n    if (this.editing) {\n      const chat = await this.chatSvc\n        .updateMessage(this.selectedMessage.id, text)\n        .then();\n      this.messages.map((m) => {\n        if (m.id === this.selectedMessage.id) {\n          m.text = text;\n        }\n      });\n      this.editing = false;\n    } else {\n      const tmpId = this.utils.makeId(6);\n\n      const message = {\n        tmp_id: tmpId,\n        slug: this.slug,\n        fromuser: this.auth.currentUserValue,\n        text,\n        image,\n        time_creation: new Date(),\n        sending: true,\n        mentions,\n      };\n\n      this.messages = [...this.messages, ...[message]].filter(\n        (m: Chat) => m.text || m.image || m.audio\n      );\n\n      this.scrollDown(1, true);\n      let replyToId =\n        this.selectedMessage && this.replying ? this.selectedMessage.id : null;\n      this.replying = false;\n\n      try {\n        let chat = null;\n        if (!image) {\n          chat = await this.roomSvc\n            .sendMessage(\n              this.slug,\n              this.room.name,\n              text,\n              replyToId,\n              tmpId,\n              mentions\n            )\n            .then();\n        } else if (image) {\n          const imageFile = await this.utils.urltoBlob(image);\n          chat = await this.roomSvc\n            .sendImage(\n              this.slug,\n              this.room.name,\n              imageFile,\n              text,\n              tmpId,\n              mentions\n            )\n            .then();\n        }\n        await this.messageReceived(chat);\n\n        this.room.last_message = chat.id;\n        this.roomSvc.setLastMessage(this.room);\n\n        replyToId = null;\n      } catch (e) {\n        this.messages = this.messages.filter((m) => m.sending !== true);\n        console.error(e);\n      }\n    }\n  }\n\n  async scrollDown(delay = 500, force = false) {\n    const scroll = await this.chatlist.getScrollElement();\n\n    if (\n      scroll.scrollTop +\n        scroll.offsetHeight +\n        (scroll.offsetHeight - 200) / 2 >=\n        scroll.scrollHeight ||\n      force\n    ) {\n      if (!this.chatlist) {\n        return;\n      }\n      setTimeout(() => {\n        this.chatlist.scrollToBottom(0);\n      }, delay);\n    }\n  }\n\n  async loadChats(event: any) {\n    if (!this.messages.length) {\n      return;\n    }\n    this.page++;\n    const messages = (await this.roomSvc.getMessages(this.slug, this.page))\n      .filter((m) => m.text || m.image || m.audio)\n      .reverse();\n    this.messages = [...messages, ...this.messages];\n\n    this.messages.map((m) => {\n      if (m.event) {\n        if (\n          m.event.participants.some(\n            (p) => p.id === this.auth.currentUserValue.id\n          )\n        ) {\n          m.event.participate = true;\n        }\n      }\n    });\n\n    event.target.complete();\n\n    if (this.messages.length < 15) {\n      event.target.disabled = true;\n    }\n  }\n\n  async showProfile(id: User[\"id\"]) {\n    if (id !== 1) {\n      this.router.navigate([\"/profile\", id]);\n    }\n  }\n\n  selectMessage(event: any, message: Chat) {\n    event.preventDefault();\n\n    this.selectedMessage = message;\n    this.pressOptions = true;\n  }\n\n  async copy() {\n    this.pressOptions = false;\n    try {\n      if (this.platform.is(\"cordova\")) {\n        await this.clipboard.copy(this.selectedMessage.text);\n      } else {\n        await navigator.clipboard.writeText(this.selectedMessage.text);\n      }\n\n      (\n        await this.toast.create({\n          message: \"Mensaje copiado\",\n          duration: 2000,\n          position: \"middle\",\n        })\n      ).present();\n    } catch (e) {\n      (\n        await this.toast.create({\n          message: \"Error al copiar el mensaje\",\n          duration: 2000,\n          position: \"middle\",\n        })\n      ).present();\n    }\n  }\n\n  reply() {\n    this.replying = true;\n    this.pressOptions = false;\n    this.scrollDown();\n  }\n\n  edit() {\n    this.editing = true;\n    this.pressOptions = false;\n    this.scrollDown();\n  }\n\n  async deleteMessage() {\n    this.pane.destroy({ animate: true });\n    try {\n      await this.chatSvc.deleteMessage(this.selectedMessage.id);\n      if (this.selectedMessage.fromuser.id === this.auth.currentUserValue.id) {\n        this.messages = this.messages.filter(\n          (m) => m.id !== this.selectedMessage.id\n        );\n      }\n    } catch (e) {\n      (\n        await this.toast.create({\n          message: \"Error al eliminar el mensaje\",\n          duration: 2000,\n          position: \"middle\",\n        })\n      ).present();\n\n      console.error(e);\n    }\n  }\n\n  async reportMessage() {\n    const alert = await this.alert.create({\n      header: `¿Quieres reportar a el mensaje de ${this.selectedMessage?.fromuser?.username}?`,\n      message:\n        \"Nos llegará un aviso para que revisemos el caso y actuemos en consecuencia.\",\n      inputs: [\n        {\n          name: \"note\",\n          type: \"text\",\n          placeholder: \"Motivo del reporte (opcional)\",\n        },\n      ],\n      buttons: [\n        {\n          text: \"Cancelar\",\n          role: \"cancel\",\n          cssClass: \"secondary\",\n        },\n        {\n          text: \"Reportar\",\n          role: \"block\",\n          handler: async (data) => {\n            try {\n              await this.chatSvc.report(this.selectedMessage, data.note);\n              (\n                await this.toast.create({\n                  message: \"Mensaje reportado correctamente\",\n                  duration: 2000,\n                  position: \"bottom\",\n                })\n              ).present();\n            } catch (e) {\n              (\n                await this.toast.create({\n                  message: `Error al reportar el mensaje ${e}`,\n                  duration: 2000,\n                  position: \"bottom\",\n                  color: \"danger\",\n                })\n              ).present();\n              alert.present();\n            }\n          },\n        },\n      ],\n      cssClass: \"round-alert\",\n    });\n\n    await alert.present();\n    this.pane.destroy({ animate: true });\n  }\n\n  async dragItem(event: any, message: Chat) {\n    this.selectedMessage = message;\n    if (event.detail.ratio < -0.9) {\n      event.target.close();\n      this.reply();\n    }\n  }\n\n  async openUrl(event: any) {\n    if (event?.target?.href) {\n      event.stopImmediatePropagation();\n      this.urlSvc.openUrl(event);\n    }\n    return false;\n  }\n\n  async openPictureSheet() {\n    if (this.platform.is(\"android\") && this.platform.is(\"cordova\")) {\n      await this.androidPermissions.requestPermissions([\n        this.androidPermissions.PERMISSION.WRITE_EXTERNAL_STORAGE,\n        this.androidPermissions.PERMISSION.READ_EXTERNAL_STORAGE,\n      ]);\n    }\n\n    if (this.platform.is(\"cordova\")) {\n      const actionSheet = await this.sheet.create({\n        buttons: [\n          {\n            text: \"Desde la cámara\",\n            icon: \"camera\",\n            handler: async () => {\n              const image = (await this.utils.takePicture(\n                \"camera\",\n                false,\n                \"default\",\n                true\n              )) as string;\n              this.addPicture(image);\n            },\n          },\n          {\n            text: \"Desde la galería\",\n            icon: \"images\",\n            handler: async () => {\n              const image = (await this.utils.takePicture(\n                \"gallery\",\n                false,\n                \"default\",\n                true\n              )) as string;\n              this.addPicture(image);\n            },\n          },\n        ],\n      });\n      await actionSheet.present();\n    } else {\n      this.imageInput.nativeElement.dispatchEvent(new MouseEvent(\"click\"));\n    }\n  }\n\n  async addPicture(image: string | File) {\n    if (typeof image !== \"string\") {\n      image = await this.utils.fileToBase64(image);\n    }\n    this.image = image;\n  }\n\n  async openViewer(src: string, title: string, text: string, scheme = \"dark\") {\n    let componentProps = {};\n    if (text) {\n      componentProps = {\n        src,\n        title,\n        text,\n        scheme,\n      };\n    } else {\n      componentProps = {\n        src,\n        title,\n        scheme,\n      };\n    }\n    const modal = await this.modalController.create({\n      component: ViewerModalComponent,\n      componentProps,\n      cssClass: \"ion-img-viewer\",\n      keyboardClose: true,\n      showBackdrop: true,\n    });\n\n    return await modal.present();\n  }\n\n  async showOptions() {\n    this.pane = new CupertinoPane(\".options-pane\", this.paneSettings);\n    this.pane.present({ animate: true });\n  }\n\n  async setWriting() {\n    if (this.writing || this.editing) {\n      return;\n    }\n    this.writing = true;\n    await this.roomSvc.writing(this.auth.currentUserValue.username, this.slug);\n    setTimeout(async () => {\n      this.writing = false;\n    }, 15000);\n  }\n\n  async showPage(slug: Page[\"slug\"]) {\n    if (this.roomPage?.slug) {\n      this.router.navigate([\"/page\", slug]);\n    }\n  }\n\n  async connectSSE() {\n    if (this.platform.is(\"cordova\")) {\n      this.firebase.onMessageReceived().subscribe((notification) => {\n        if (notification?.message) {\n          const message = JSON.parse(notification.message) as Chat;\n          // console.log(message);\n          this.messageReceived(message);\n        }\n      });\n    } else {\n      this.afMessaging.messages.subscribe((payload: any) => {\n        if (payload?.data?.message) {\n          const message = JSON.parse(payload.data.message) as Chat;\n          this.messageReceived(message);\n        }\n      });\n    }\n  }\n\n  async messageReceived(message: Chat) {\n    if (message.conversationId === this.slug) {\n      if (\n        message.writing &&\n        message.fromuser.username !== this.auth.currentUserValue.username\n      ) {\n        this.toUserWriting = message.fromuser.name + \" está escribiendo...\";\n        this.cd.detectChanges();\n        setTimeout(() => {\n          this.toUserWriting = \"\";\n          this.cd.detectChanges();\n        }, 10000);\n      } else if (!message.writing) {\n        this.toUserWriting = \"\";\n        if (\n          this.messages.some(\n            (m) =>\n              (m.id === message.id && !!m.id) ||\n              (m.tmp_id === message.tmp_id && !!m.tmp_id)\n          )\n        ) {\n          // Si ya existe el mensaje lo actualizamos\n          this.messages.map((m) => {\n            if (\n              (m.id === message.id && !!m.id) ||\n              (m.tmp_id === message.tmp_id && !!m.tmp_id)\n            ) {\n              m.id = message.id;\n              m.text = message.text;\n              m.time_read = message.time_read;\n              m.edited = message.edited;\n              m.deleted = message.deleted;\n              m.sending = false;\n              m.modded = message.modded;\n              m.reply_to = message.reply_to;\n            }\n          });\n        } else {\n          this.messages = [...this.messages, message];\n        }\n\n        // Borramos los deleted\n        this.messages = this.messages.filter((m) => !m.deleted);\n        this.cd.detectChanges();\n        this.scrollDown();\n      }\n    }\n  }\n\n  goToMessage(message: Chat) {\n    if (message?.reply_to?.id) {\n      const el = document.getElementById(\"\" + message.reply_to.id);\n      if (el) {\n        el.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\n        el.classList.add(\"clicked\");\n        setTimeout(() => {\n          el.classList.remove(\"clicked\");\n        }, 1000);\n      }\n    }\n  }\n\n  async createEvent() {\n    const modal = await this.modalController.create({\n      component: EventModal,\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\",\n      componentProps: { page: this.roomPage },\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n  }\n\n  showEvent(event: Event) {\n    this.router.navigate([\"/event\", event.id]);\n  }\n\n  back() {\n    this.nav.back();\n    this.source?.close();\n  }\n\n  ngOnDestroy() {\n    if (this.room?.visible || this.roomPage) {\n      this.room.last_message = this.messages[this.messages.length - 1]?.id;\n      this.roomSvc.setLastMessage(this.room);\n    }\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}