{"version":3,"file":"src_app_pages_page_page_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACc;AAEhB;AAEvC,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,gDAAQ;KACpB;CACF,CAAC;IAMW,qBAAqB,SAArB,qBAAqB;CAAG;AAAxB,qBAAqB;IAJjC,uDAAQ,CAAC;QACR,OAAO,EAAE,CAAC,kEAAqB,CAAC,MAAM,CAAC,CAAC;QACxC,OAAO,EAAE,CAAC,yDAAY,CAAC;KACxB,CAAC;GACW,qBAAqB,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;AChBO;AACM;AACF;AACA;AAEiB;AACvB;AACmB;IAY7C,cAAc,SAAd,cAAc;CAAG;AAAjB,cAAc;IAV1B,uDAAQ,CAAC;QACR,OAAO,EAAE;YACP,yDAAY;YACZ,uDAAW;YACX,uDAAW;YACX,uEAAqB;YACrB,+DAAY;SACb;QACD,YAAY,EAAE,CAAC,gDAAQ,CAAC;KACzB,CAAC;GACW,cAAc,CAAG;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnBmC;AACpB;AACe;AACS;AACJ;AACN;AAGI;AAKF;AACA;AACE;AACJ;AACS;AACc;AACd;AAEG;IAOvD,QAAQ,SAAR,QAAQ;IAkBnB,YACU,KAAqB,EACrB,OAAoB,EACpB,OAAoB,EACpB,QAAsB,EACvB,IAAiB,EAChB,MAAkB,EAClB,KAAsB,EACtB,KAAsB,EACtB,MAAc,EACd,GAAe,EACf,IAAU,EACV,KAAY,EACZ,QAAsB;QAZtB,UAAK,GAAL,KAAK,CAAgB;QACrB,YAAO,GAAP,OAAO,CAAa;QACpB,YAAO,GAAP,OAAO,CAAa;QACpB,aAAQ,GAAR,QAAQ,CAAc;QACvB,SAAI,GAAJ,IAAI,CAAa;QAChB,WAAM,GAAN,MAAM,CAAY;QAClB,UAAK,GAAL,KAAK,CAAiB;QACtB,UAAK,GAAL,KAAK,CAAiB;QACtB,WAAM,GAAN,MAAM,CAAQ;QACd,QAAG,GAAH,GAAG,CAAY;QACf,SAAI,GAAJ,IAAI,CAAM;QACV,UAAK,GAAL,KAAK,CAAO;QACZ,aAAQ,GAAR,QAAQ,CAAc;QA3BzB,SAAI,GAAkB,EAAE,CAAC;QAEzB,oBAAe,GAAG,KAAK,CAAC;QAGxB,gBAAW,GAAG;YACnB,aAAa,EAAE,GAAG;YAClB,WAAW,EAAE;gBACX,IAAI,EAAE;oBACJ,aAAa,EAAE,IAAI;iBACpB;aACF;SACF,CAAC;IAgBC,CAAC;IAEE,eAAe;;;YACnB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;YACtD,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;gBAC9B,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBAC7C,IAAI,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,CAAC;gBACtE,IAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,IAAI,CAAC,SAAS,EAAE,CAAC;aAClB;iBAAM;gBACL,IAAI,CAAC,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;aACpD;YAED,MAAM,YAAY,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,cAAc,EAAE,CAAC;YACzD,IAAI,UAAU,GAAG,YAAY,aAAZ,YAAY,uBAAZ,YAAY,CAAE,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAC1E,IACE,WAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,YAAY,KAAG,UAAI,CAAC,IAAI,0CAAE,IAAI,CAAC,YAAY;gBACvD,CAAC,CAAC,WAAU,aAAV,UAAU,uBAAV,UAAU,CAAE,YAAY,MAAI,UAAI,CAAC,IAAI,0CAAE,IAAI,CAAC,YAAY,EAAC,EAC3D;gBACA,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;aACzB;YAED,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC;gBAChB;oBACE,IAAI,EAAE,UAAU;oBAChB,OAAO,EACL,iCAAiC;yBACjC,UAAI,CAAC,IAAI,0CAAE,IAAI;wBACf,IAAI;yBACJ,UAAI,CAAC,IAAI,0CAAE,QAAQ;iBACtB;gBACD,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,eAAe,EAAE;gBAC5C,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,YAAY,EAAE;gBACzC,EAAE,OAAO,EAAE,OAAO,EAAE;aACrB,CAAC,CAAC;YAEH,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,YAAY,IAAG,UAAI,CAAC,IAAI,0CAAE,IAAI,IAAG,gBAAgB,CAAC,CAAC;YACvE,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;gBAClB,IAAI,EAAE,aAAa;gBACnB,OAAO,EAAE,UAAI,CAAC,IAAI,0CAAE,WAAW;aAChC,CAAC,CAAC;;KACJ;IAEK,UAAU;;YACd,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACnE,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;YACnD,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,QAAQ,CAAC,YAAY,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QACjE,CAAC;KAAA;IAEK,SAAS;;YACb,IAAI,CAAC,MAAM,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YAChE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE;gBAClB,IAAI,CAAC,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,EAAE;oBACpE,CAAC,CAAC,WAAW,GAAG,IAAI,CAAC;iBACtB;YACH,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,QAAQ;;YACZ,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAE,+EAAU;gBACrB,aAAa,EAAE,IAAI;gBACnB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,YAAY;gBACtB,cAAc,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,IAAI,EAAE;aACpC,CAAC,CAAC;YAEH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;QAC7B,CAAC;KAAA;IAED,SAAS,CAAC,KAAY;QACpB,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,QAAQ,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;IAC7C,CAAC;IAEK,QAAQ;;YACZ,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAE,sEAAU;gBACrB,cAAc,EAAE,EAAE,IAAI,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE;gBAC9C,aAAa,EAAE,IAAI;gBACnB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,YAAY;aACvB,CAAC,CAAC;YAEH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAC3B,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;QAC1B,CAAC;KAAA;IAEK,WAAW,CAAC,EAAc;;YAC9B,IAAI,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;YACnE,OAAO,GAAG;gBACR,GAAG,OAAO;gBACV,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC;aACxD,CAAC;YACF,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAE,oFAAgB;gBAC3B,cAAc,EAAE,EAAE,OAAO,EAAE;gBAC3B,aAAa,EAAE,IAAI;gBACnB,YAAY,EAAE,IAAI;gBAClB,QAAQ,EAAE,YAAY;aACvB,CAAC,CAAC;YAEH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;YAC3B,MAAM,IAAI,CAAC,UAAU,EAAE,CAAC;QAC1B,CAAC;KAAA;IAEK,UAAU,CAAC,GAAW,EAAE,KAAa,EAAE,MAAM,GAAG,MAAM;;YAC1D,IAAI,cAAc,GAAG,EAAE,CAAC;YAExB,cAAc,GAAG;gBACf,GAAG;gBACH,KAAK;gBACL,MAAM;aACP,CAAC;YACF,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;gBACpC,SAAS,EAAE,yEAAoB;gBAC/B,cAAc;gBACd,QAAQ,EAAE,gBAAgB;gBAC1B,aAAa,EAAE,IAAI;gBACnB,YAAY,EAAE,IAAI;aACnB,CAAC,CAAC;YAEH,OAAO,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;QAC/B,CAAC;KAAA;IAEK,MAAM;;YACV,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;gBAC9B,IAAI;oBACF,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;wBACpC,OAAO,EAAE,sBAAsB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;wBAChD,QAAQ,EAAE,IAAI;wBACd,QAAQ,EAAE,KAAK;wBACf,OAAO,EAAE;4BACP;gCACE,IAAI,EAAE,UAAU;gCAChB,OAAO,EAAE,GAAG,EAAE,GAAE,CAAC;6BAClB;yBACF;qBACF,CAAC,CAAC;oBACH,KAAK,CAAC,OAAO,EAAE,CAAC;oBAEhB,MAAM,GAAG,GAAG,MAAM,KAAK,CAAC,YAAY,EAAE,CAAC;oBACvC,IAAI,GAAG,CAAC,IAAI,KAAK,SAAS,EAAE;wBAC1B,IAAI,CAAC,GAAG,GAAG,MAAM,IAAI,CAAC,MAAM,CAAC,MAAM,CACjC,IAAI,CAAC,IAAI,CAAC,IAAI,EACd,IAAI,CAAC,IAAI,CAAC,QAAQ,EAClB,IAAI,CAAC,IAAI,CAAC,IAAI,CACf,CAAC;wBACF,CACE,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;4BACtB,OAAO,EAAE,oBAAoB,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;4BAC9C,QAAQ,EAAE,IAAI;4BACd,QAAQ,EAAE,QAAQ;yBACnB,CAAC,CACH,CAAC,OAAO,EAAE,CAAC;qBACb;oBAED,MAAM,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,gBAAgB,CAAC;oBACxC,IAAI,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC1C,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBAC7B;gBAAC,OAAO,CAAC,EAAE;oBACV,CACE,MAAM,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC;wBACtB,OAAO,EAAE,+BAA+B,IAAI,CAAC,IAAI,CAAC,IAAI,GAAG;wBACzD,KAAK,EAAE,QAAQ;wBACf,QAAQ,EAAE,IAAI;wBACd,QAAQ,EAAE,QAAQ;qBACnB,CAAC,CACH,CAAC,OAAO,EAAE,CAAC;oBACZ,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;iBAClB;aACF;iBAAM;gBACL,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,EAAE;oBAChC,WAAW,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;iBAC5C,CAAC,CAAC;aACJ;QACH,CAAC;KAAA;IAEK,QAAQ,CAAC,IAAkB;;YAC/B,IAAI,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE;gBAC9B,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC,CAAC;aACvC;iBAAM;gBACL,IAAI,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,EAAE;oBAChC,WAAW,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,EAAE;iBAC5C,CAAC,CAAC;aACJ;QACH,CAAC;KAAA;IAED,MAAM;QACJ,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,SAAS,EAAE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACpD,CAAC;IAED,IAAI;QACF,IAAI,CAAC,GAAG,CAAC,IAAI,EAAE,CAAC;IAClB,CAAC;CACF;;YA/PQ,4DAAc;YAYd,+DAAW;YANX,sEAAW;YAOX,iEAAY;YAFZ,+DAAW;YAGX,6DAAU;YAbO,4DAAe;YAAhC,4DAAe;YADC,oDAAM;YAiBtB,4EAAU;YAdV,4DAAI;YAAE,6DAAK;YALX,wEAAY;;AA4BR,QAAQ;IALpB,yDAAS,CAAC;QACT,QAAQ,EAAE,UAAU;QACpB,iEAA+B;;KAEhC,CAAC;6EAoBiB,4DAAc;QACZ,+DAAW;QACX,sEAAW;QACV,iEAAY;QACjB,+DAAW;QACR,6DAAU;QACX,4DAAe;QACf,4DAAe;QACd,oDAAM;QACT,4EAAU;QACT,4DAAI;QACH,6DAAK;QACF,wEAAY;GA/BrB,QAAQ,CAqOpB;AArOoB","sources":["./src/app/pages/page/page-routing.module.ts","./src/app/pages/page/page.module.ts","./src/app/pages/page/page.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { PagePage } from './page.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: PagePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class PagePageRoutingModule {}\n","import { NgModule } from \"@angular/core\";\nimport { CommonModule } from \"@angular/common\";\nimport { FormsModule } from \"@angular/forms\";\nimport { IonicModule } from \"@ionic/angular\";\n\nimport { PagePageRoutingModule } from \"./page-routing.module\";\nimport { PagePage } from \"./page.page\";\nimport { SharedModule } from \"../../shared/shared.module\";\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    PagePageRoutingModule,\n    SharedModule\n  ],\n  declarations: [PagePage]\n})\nexport class PagePageModule {}\n","import { EventService } from \"src/app/services/event.service\";\nimport { Component } from \"@angular/core\";\nimport { ActivatedRoute, Router } from \"@angular/router\";\nimport { ModalController, ToastController } from \"@ionic/angular\";\nimport { ViewerModalComponent } from \"ngx-ionic-image-viewer\";\nimport { Meta, Title } from \"@angular/platform-browser\";\n\nimport { Room } from \"src/app/models/room\";\nimport { RoomService } from \"src/app/services/room.service\";\nimport { Page } from \"../../models/page\";\nimport { Story } from \"../../models/story\";\nimport { Tag } from \"../../models/tags\";\nimport { User } from \"../../models/user\";\nimport { AuthService } from \"../../services/auth.service\";\nimport { PageService } from \"../../services/page.service\";\nimport { StoryService } from \"../../services/story.service\";\nimport { TagService } from \"../../services/tag.service\";\nimport { StoryModal } from \"../../story/story-modal/story.modal\";\nimport { ViewStoriesModal } from \"../../story/view-stories/view-stories.modal\";\nimport { NavService } from \"src/app/services/navigation.service\";\nimport { Event } from \"src/app/models/event\";\nimport { EventModal } from \"src/app/events/event-modal/event.modal\";\n\n@Component({\n  selector: \"app-page\",\n  templateUrl: \"./page.page.html\",\n  styleUrls: [\"./page.page.scss\"]\n})\nexport class PagePage {\n  public page: Page;\n  public tag: Tag;\n  public stories: Story[];\n  public room: Partial<Room> = {};\n  public groupedStories: Story[];\n  public showDescription = false;\n  public events: Event[];\n\n  public storiesOpts = {\n    slidesPerView: 6.5,\n    breakpoints: {\n      1024: {\n        slidesPerView: 10.5\n      }\n    }\n  };\n\n  constructor(\n    private route: ActivatedRoute,\n    private pageSvc: PageService,\n    private roomSvc: RoomService,\n    private storySvc: StoryService,\n    public auth: AuthService,\n    private tagSvc: TagService,\n    private toast: ToastController,\n    private modal: ModalController,\n    private router: Router,\n    private nav: NavService,\n    private meta: Meta,\n    private title: Title,\n    private eventSvc: EventService\n  ) {}\n\n  async ngAfterViewInit() {\n    const slug = this.route.snapshot.paramMap.get(\"slug\");\n    if (this.auth.currentUserValue) {\n      this.page = await this.pageSvc.getPage(slug);\n      this.tag = this.auth.currentUserValue.tags.find(t => t.slug === slug);\n      this.getStories();\n      this.getEvents();\n    } else {\n      this.page = await this.pageSvc.getPublicPage(slug);\n    }\n\n    const rooms_config = await this.roomSvc.getRoomsConfig();\n    let configRoom = rooms_config?.find(room => room.slug === this.page.slug);\n    if (\n      configRoom?.last_message < this.page?.room.last_message ||\n      (!configRoom?.last_message && this.page?.room.last_message)\n    ) {\n      this.room.unread = true;\n    }\n\n    this.meta.addTags([\n      {\n        name: \"keywords\",\n        content:\n          \"frikiradar, friki, red social, \" +\n          this.page?.name +\n          \", \" +\n          this.page?.category\n      },\n      { name: \"robots\", content: \"index, follow\" },\n      { name: \"author\", content: \"FrikiRadar\" },\n      { charset: \"UTF-8\" }\n    ]);\n\n    this.title.setTitle(\"Página de \" + this.page?.name + \" en FrikiRadar\");\n    this.meta.updateTag({\n      name: \"description\",\n      content: this.page?.description\n    });\n  }\n\n  async getStories() {\n    const stories = await this.storySvc.getStoriesSlug(this.page.slug);\n    this.stories = this.storySvc.orderStories(stories);\n    this.groupedStories = this.storySvc.groupStories(this.stories);\n  }\n\n  async getEvents() {\n    this.events = await this.eventSvc.getEventsSlug(this.page.slug);\n    this.events.map(e => {\n      if (e.participants.some(p => p.id === this.auth.currentUserValue.id)) {\n        e.participate = true;\n      }\n    });\n  }\n\n  async newEvent() {\n    const modal = await this.modal.create({\n      component: EventModal,\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\",\n      componentProps: { page: this.page }\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n  }\n\n  showEvent(event: Event) {\n    this.router.navigate([\"/event\", event.id]);\n  }\n\n  async newStory() {\n    const modal = await this.modal.create({\n      component: StoryModal,\n      componentProps: { hash: `#${this.page.slug}` },\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\"\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    await this.getStories();\n  }\n\n  async showStories(id: User[\"id\"]) {\n    let stories = this.stories.reverse().filter(s => s.user.id === id);\n    stories = [\n      ...stories,\n      ...this.stories.reverse().filter(s => s.user.id !== id)\n    ];\n    const modal = await this.modal.create({\n      component: ViewStoriesModal,\n      componentProps: { stories },\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\"\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    await this.getStories();\n  }\n\n  async openViewer(src: string, title: string, scheme = \"dark\") {\n    let componentProps = {};\n\n    componentProps = {\n      src,\n      title,\n      scheme\n    };\n    const modal = await this.modal.create({\n      component: ViewerModalComponent,\n      componentProps,\n      cssClass: \"ion-img-viewer\",\n      keyboardClose: true,\n      showBackdrop: true\n    });\n\n    return await modal.present();\n  }\n\n  async addTag() {\n    if (this.auth.currentUserValue) {\n      try {\n        const toast = await this.toast.create({\n          message: `Añadiendo etiqueta ${this.page.name}.`,\n          duration: 5000,\n          position: \"top\",\n          buttons: [\n            {\n              text: \"Deshacer\",\n              handler: () => {}\n            }\n          ]\n        });\n        toast.present();\n\n        const log = await toast.onDidDismiss();\n        if (log.role === \"timeout\") {\n          this.tag = await this.tagSvc.addTag(\n            this.page.name,\n            this.page.category,\n            this.page.slug\n          );\n          (\n            await this.toast.create({\n              message: `Etiqueta añadida ${this.page.name}.`,\n              duration: 5000,\n              position: \"bottom\"\n            })\n          ).present();\n        }\n\n        const user = this.auth.currentUserValue;\n        user.tags = [...[this.tag], ...user.tags];\n        this.auth.setAuthUser(user);\n      } catch (e) {\n        (\n          await this.toast.create({\n            message: `Error al añadir la etiqueta ${this.page.name}.`,\n            color: \"danger\",\n            duration: 5000,\n            position: \"middle\"\n          })\n        ).present();\n        console.error(e);\n      }\n    } else {\n      this.nav.navigateRoot([\"/login\"], {\n        queryParams: { returnUrl: this.router.url }\n      });\n    }\n  }\n\n  async showRoom(slug: Page[\"slug\"]) {\n    if (this.auth.currentUserValue) {\n      this.router.navigate([\"/room\", slug]);\n    } else {\n      this.nav.navigateRoot([\"/login\"], {\n        queryParams: { returnUrl: this.router.url }\n      });\n    }\n  }\n\n  search() {\n    this.router.navigate([\"/search\", this.page.name]);\n  }\n\n  back() {\n    this.nav.back();\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}