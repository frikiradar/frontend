{"version":3,"file":"src_app_events_events_module_ts.js","mappings":"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","sources":["./src/app/events/events-routing.module.ts","./src/app/events/events.module.ts","./src/app/events/events.page.ts"],"sourcesContent":["import { NgModule } from \"@angular/core\";\nimport { Routes, RouterModule } from \"@angular/router\";\n\nimport { EventsPage } from \"./events.page\";\n\nconst routes: Routes = [\n  {\n    path: \"\",\n    component: EventsPage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class EventsPageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { EventsPageRoutingModule } from './events-routing.module';\n\nimport { EventsPage } from './events.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    EventsPageRoutingModule\n  ],\n  declarations: [EventsPage]\n})\nexport class EventsPageModule {}\n","import { Component, OnInit } from \"@angular/core\";\nimport { Router } from \"@angular/router\";\nimport { ModalController } from \"@ionic/angular\";\nimport { CupertinoPane, CupertinoSettings } from \"cupertino-pane\";\n\nimport { Event } from \"../models/event\";\nimport { User } from \"../models/user\";\nimport { AuthService } from \"../services/auth.service\";\nimport { EventService } from \"../services/event.service\";\nimport { NavService } from \"../services/navigation.service\";\nimport { UserService } from \"../services/user.service\";\nimport { UtilsService } from \"../services/utils.service\";\nimport { EventModal } from \"./event-modal/event.modal\";\n\n@Component({\n  selector: \"app-events\",\n  templateUrl: \"./events.page.html\",\n  styleUrls: [\"./events.page.scss\"]\n})\nexport class EventsPage implements OnInit {\n  public type: \"suggested\" | \"online\" | \"near\" | \"my\" = \"suggested\";\n  public events: Event[];\n  public pane: CupertinoPane;\n  public user: User;\n  public loading = true;\n  public my = false;\n\n  private paneSettings: CupertinoSettings = {\n    backdrop: true,\n    bottomClose: true,\n    buttonDestroy: false,\n    handleKeyboard: false,\n    breaks: {\n      middle: { enabled: true, height: 500, bounce: true },\n      bottom: { enabled: true, height: 300, bounce: true }\n    },\n    initialBreak: \"bottom\",\n    onBackdropTap: () => {\n      this.pane.destroy({ animate: true });\n    },\n    onDidDismiss: () => {\n      // Guardamos cambios\n      this.userSvc.updateUser(this.user);\n    }\n  };\n\n  constructor(\n    public auth: AuthService,\n    private modal: ModalController,\n    private eventSvc: EventService,\n    private router: Router,\n    public utils: UtilsService,\n    private userSvc: UserService,\n    private nav: NavService\n  ) {}\n\n  async ngOnInit() {\n    this.changeTab(\"suggested\");\n    this.user = this.auth.currentUserValue;\n    // console.log(events);\n  }\n\n  async newEvent() {\n    const modal = await this.modal.create({\n      component: EventModal,\n      keyboardClose: true,\n      showBackdrop: true,\n      cssClass: \"full-modal\"\n    });\n\n    await modal.present();\n    await modal.onDidDismiss();\n    this.changeTab(\"suggested\");\n  }\n\n  showEvent(event: Event) {\n    this.nav.navigateRoot(\"/event/\" + event.id);\n  }\n\n  async myEvents() {\n    this.loading = true;\n    const events = await this.eventSvc.getMyEvents();\n    const now = new Date();\n\n    events.map(e => {\n      if (new Date(e.date) < now) {\n        e.past = true;\n      }\n    });\n    events.sort((a, b) => {\n      if (a.past || b.past) {\n        return new Date(b.date).getTime() - new Date(a.date).getTime();\n      } else {\n        return new Date(a.date).getTime() - new Date(b.date).getTime();\n      }\n    });\n    this.setEvents(events);\n    this.my = true;\n    this.loading = false;\n  }\n\n  back() {\n    this.my = false;\n    this.changeTab(\"suggested\");\n  }\n\n  showOptions() {\n    this.pane = new CupertinoPane(\".events-pane\", this.paneSettings);\n    this.pane.present({ animate: true });\n  }\n\n  async changeTab(type: \"suggested\" | \"online\" | \"near\") {\n    this.type = type;\n    this.events = undefined;\n    this.loading = true;\n    let events: Event[] = null;\n    switch (type) {\n      case \"suggested\":\n        events = await this.eventSvc.getSuggestedEvents();\n        break;\n      case \"online\":\n        events = await this.eventSvc.getOnlineEvents();\n        break;\n      case \"near\":\n        events = await this.eventSvc.getNearEvents();\n        break;\n    }\n\n    this.setEvents(events);\n    this.loading = false;\n  }\n\n  changePreferences(property: string, value: string) {\n    if (property === \"country\") {\n      this.user.country = value;\n    }\n\n    if (property === \"city\") {\n      this.user.city = value;\n    }\n  }\n\n  setEvents(events: Event[]) {\n    events.map(e => {\n      if (e.participants.some(p => p.id === this.auth.currentUserValue.id)) {\n        e.participate = true;\n      }\n    });\n\n    this.events = events;\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///"}